<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leo&#39;s Blog</title>
  
  <subtitle>Don&#39;t Worry, Be happy</subtitle>
  <link href="https://tauleos.github.io/atom.xml" rel="self"/>
  
  <link href="https://tauleos.github.io/"/>
  <updated>2020-11-05T07:05:17.022Z</updated>
  <id>https://tauleos.github.io/</id>
  
  <author>
    <name>Tauleos</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é˜¿é‡Œç¬”è¯•é¢˜æ”¶é›†-1</title>
    <link href="https://tauleos.github.io/4c84e4a4db9d.html"/>
    <id>https://tauleos.github.io/4c84e4a4db9d.html</id>
    <published>2020-11-05T06:56:40.000Z</published>
    <updated>2020-11-05T07:05:17.022Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å¦ç±»æ’åº"><a href="#ä¸€ã€å¦ç±»æ’åº" class="headerlink" title="ä¸€ã€å¦ç±»æ’åº"></a>ä¸€ã€å¦ç±»æ’åº</h2><p>é¢˜ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. æ’åºåè¾“å‡º id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&lt;Object&gt;&#125;</span> <span class="variable">list</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Array&lt;number&gt;&#125;</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> * [</span></span><br><span class="line"><span class="comment"> *  &#123; id: 2, before: 1 &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 1, last: true &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 3, after: 1 &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 5, first: true &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 6, last: true &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 7, last: true &#125;,</span></span><br><span class="line"><span class="comment"> *  &#123; id: 8, last: true &#125;,</span></span><br><span class="line"><span class="comment"> * ];</span></span><br><span class="line"><span class="comment"> * è¾“å‡ºä¸º</span></span><br><span class="line"><span class="comment"> * [5, 2, 1, 3, 6, 7, 8];</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>è§£æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> result = [];</span><br><span class="line"><span class="keyword">let</span> filtered = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> arr)&#123;</span><br><span class="line"><span class="keyword">if</span>(i.first)&#123;</span><br><span class="line">result.unshift(i.id);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i.last)&#123;</span><br><span class="line">result.push(i.id);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">filtered.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> filtered)&#123;</span><br><span class="line"><span class="keyword">if</span>(i.before)&#123;</span><br><span class="line"><span class="keyword">let</span> index = result.indexOf(i.before);</span><br><span class="line">result.splice(index, <span class="number">0</span>,i.id);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i.after)&#123;</span><br><span class="line"><span class="keyword">let</span> index = result.indexOf(i.after);</span><br><span class="line">result.splice(index+<span class="number">1</span>, <span class="number">0</span>,i.id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€äºŒç»´æ•°ç»„è½¬æ ‘çŠ¶ç»“æ„"><a href="#äºŒã€äºŒç»´æ•°ç»„è½¬æ ‘çŠ¶ç»“æ„" class="headerlink" title="äºŒã€äºŒç»´æ•°ç»„è½¬æ ‘çŠ¶ç»“æ„"></a>äºŒã€äºŒç»´æ•°ç»„è½¬æ ‘çŠ¶ç»“æ„</h2><p>é¢˜ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2. å°†æ•°ç»„è½¬æ¢æˆæ ‘çŠ¶ç»“æ„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Object&#125;</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> * [</span></span><br><span class="line"><span class="comment"> *   &#123; id: 1, name: &#x27;i1&#x27; &#125;,</span></span><br><span class="line"><span class="comment"> *   &#123; id: 2, name: &#x27;i2&#x27;, parentId: 1 &#125;,</span></span><br><span class="line"><span class="comment"> *   &#123; id: 4, name: &#x27;i4&#x27;, parentId: 3 &#125;,</span></span><br><span class="line"><span class="comment"> *   &#123; id: 3, name: &#x27;i3&#x27;, parentId: 2 &#125;,</span></span><br><span class="line"><span class="comment"> *   &#123; id: 8, name: &#x27;i8&#x27;, parentId: 7 &#125;,</span></span><br><span class="line"><span class="comment"> * ]</span></span><br><span class="line"><span class="comment"> * è½¬æ¢å</span></span><br><span class="line"><span class="comment"> * &#123;</span></span><br><span class="line"><span class="comment"> *   id: 1,</span></span><br><span class="line"><span class="comment"> *   name: &#x27;i1&#x27;,</span></span><br><span class="line"><span class="comment"> *   children: [</span></span><br><span class="line"><span class="comment"> *     &#123; id: 2, name: &#x27;i2&#x27;, parentId: 1, children: [...] &#125;,</span></span><br><span class="line"><span class="comment"> *   ]</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>è§£ç­”ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convert2Tree</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> parentMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> root;</span><br><span class="line">arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a.id-b.id);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> node <span class="keyword">of</span> arr)&#123;</span><br><span class="line">node.children = [];</span><br><span class="line"><span class="keyword">if</span>(!node.parentId)&#123;</span><br><span class="line"></span><br><span class="line">root = node;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">let</span> parent = parentMap[node.parentId];</span><br><span class="line"><span class="keyword">if</span>(parent)&#123;</span><br><span class="line">parent.children.push(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">parentMap[node.id] = node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€ç”¨setTimeoutå®ç°setInterval"><a href="#ä¸‰ã€ç”¨setTimeoutå®ç°setInterval" class="headerlink" title="ä¸‰ã€ç”¨setTimeoutå®ç°setInterval"></a>ä¸‰ã€ç”¨setTimeoutå®ç°setInterval</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3. å®ç° setInterval</span></span><br><span class="line"><span class="comment"> * åˆ©ç”¨ setTimeout å®ç° setInterval</span></span><br><span class="line"><span class="comment"> * åˆ©ç”¨ clearTimeout å®ç° clearInterval</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">callback</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">duration</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> * mySetInterval(()=&gt; &#123;</span></span><br><span class="line"><span class="comment"> *   console.log(&#x27;xxx&#x27;);</span></span><br><span class="line"><span class="comment"> * &#125;, 200);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> timerMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> id = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mySetInterval</span>(<span class="params">callback, duration</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> timerId = id;</span><br><span class="line">id++;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">callback();</span><br><span class="line">timerMap[timerId] = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">fn();</span><br><span class="line">&#125;, duration)</span><br><span class="line">&#125;</span><br><span class="line">timerMap[timerId] = <span class="built_in">setTimeout</span>(fn, duration);</span><br><span class="line"><span class="keyword">return</span> timerMap[timerId];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">timer</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> * const timer = mySetInterval(()=&gt; &#123;</span></span><br><span class="line"><span class="comment"> *   console.log(&#x27;xxx&#x27;);</span></span><br><span class="line"><span class="comment"> * &#125;, 200);</span></span><br><span class="line"><span class="comment"> * setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment"> *   myClearInterval(timer);</span></span><br><span class="line"><span class="comment"> * &#125;, 1000);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myClearInterval</span>(<span class="params">timer</span>) </span>&#123;</span><br><span class="line"><span class="built_in">clearTimeout</span>(timerMap[timer]);</span><br><span class="line"><span class="comment">// clearTimeout(timer);</span></span><br><span class="line"><span class="keyword">delete</span> timerMap[timer];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://juejin.im/post/6844903839934447629">ç”¨setTimeoutå’ŒclearTimeoutç®€å•å®ç°setIntervalä¸clearInterval</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å¦ç±»æ’åº&quot;&gt;&lt;a href=&quot;#ä¸€ã€å¦ç±»æ’åº&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å¦ç±»æ’åº&quot;&gt;&lt;/a&gt;ä¸€ã€å¦ç±»æ’åº&lt;/h2&gt;&lt;p&gt;é¢˜ç›®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>jsæºç å®ç°-reduce-isArray</title>
    <link href="https://tauleos.github.io/6aef7f739395.html"/>
    <id>https://tauleos.github.io/6aef7f739395.html</id>
    <published>2020-10-27T03:46:38.000Z</published>
    <updated>2020-10-27T07:12:40.162Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h2><blockquote><p><code>reduce()</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆä¸ºä¸€ä¸ªå€¼ï¼Œæ˜¯<em>ES5</em>ä¸­æ–°å¢çš„åˆä¸€ä¸ªæ•°ç»„é€é¡¹å¤„ç†æ–¹æ³•</p></blockquote><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><div class='tip'>arr.reduce(callback[, initialValue]) </div><h3 id="å‚æ•°å›¾è§£"><a href="#å‚æ•°å›¾è§£" class="headerlink" title="å‚æ•°å›¾è§£"></a>å‚æ•°å›¾è§£</h3><p><img src="images/reduce/reduce.jpg" alt="reduce"></p><h3 id="åŸç†å®ç°"><a href="#åŸç†å®ç°" class="headerlink" title="åŸç†å®ç°"></a>åŸç†å®ç°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myReduce = <span class="function"><span class="keyword">function</span>(<span class="params">callbackFn,initialValue</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> len = self.length;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> accumulator = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">// å‚æ•°ä¸æ˜¯å‡½æ•°æŠ¥é”™</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> callbackFn !== <span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(callbackFn +<span class="string">&#x27;is not a function&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ•°ç»„ä¸ºç©ºï¼Œå¹¶ä¸”æœ‰åˆå§‹å€¼ï¼ŒæŠ¥é”™</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">arguments</span>.length&lt;<span class="number">2</span> &amp;&amp; len === <span class="number">0</span> )&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Reduce of empty array with no initial value&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  initialValue = initialValue || <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">// è®¾ç½®ç´¯åŠ å™¨ä¸ºåˆå§‹å€¼ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">arguments</span>.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">    accumulator = initialValue;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    accumulator = self[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span>(index&lt;len)&#123;</span><br><span class="line">    <span class="keyword">if</span>(self.hasOwnProperty(index))&#123;</span><br><span class="line">      <span class="keyword">let</span> val = self[index];</span><br><span class="line">      accumulator = callbackFn.apply(<span class="literal">null</span>,[accumulator,val,index,self]);</span><br><span class="line">    &#125;</span><br><span class="line">    index++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> accumulator;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> rReduce = [<span class="string">&#x27;1&#x27;</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, , <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> mReduce = [<span class="string">&#x27;1&#x27;</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, , <span class="number">3</span>, <span class="number">4</span>].myReduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(rReduce, mReduce);</span><br><span class="line"><span class="comment">// 31nullundefined34 31nullundefined34</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="isArray"><a href="#isArray" class="headerlink" title="isArray"></a>isArray</h2><blockquote><p><code>Array.isArray()</code> ç”¨äºç¡®å®šä¼ é€’çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª <code>Array</code>ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.myIsArray = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(target) === <span class="string">&#x27;[object Array]&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.myIsArray([])) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.myIsArray(&#123;&#125;)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>å®Œ~</p><p>å‚è€ƒ</p><ul><li><a href="https://mp.weixin.qq.com/s/Qqh1H-2MUyVGoWjgOstQrg">å¹²è´§ï¼é˜¿é‡ŒP6æ‰‹å†™æºç é¢è¯•é¢˜é›†é”¦</a></li><li><a href="https://aotu.io/notes/2016/04/14/js-reduce/index.html">JavaScriptä¸­reduce()æ–¹æ³•ä¸å®Œå…¨æŒ‡å—</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Reduce&quot;&gt;&lt;a href=&quot;#Reduce&quot; class=&quot;headerlink&quot; title=&quot;Reduce&quot;&gt;&lt;/a&gt;Reduce&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;reduce()&lt;/code&gt; æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯</summary>
      
    
    
    
    
    <category term="js" scheme="https://tauleos.github.io/tags/js/"/>
    
    <category term="æºç " scheme="https://tauleos.github.io/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†æ¢ç´¢</title>
    <link href="https://tauleos.github.io/b7436f608b7a.html"/>
    <id>https://tauleos.github.io/b7436f608b7a.html</id>
    <published>2020-10-15T06:38:46.000Z</published>
    <updated>2020-10-15T09:33:55.072Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬æ—¥å¸¸Codingè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šæœ‰å¼€å‘ç±»åº“çš„éœ€æ±‚</p><a id="more"></a><p>å¼€å‘å®Œæˆå‘å¸ƒä¹‹åï¼Œåç»­ç‰ˆæœ¬ç®¡ç†ï¼Œæ›´æ–°æ—¥å¿—ç­‰é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥ï¼Œå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿ</p><h1 id="ä¸€ã€æ‰‹æ‰“"><a href="#ä¸€ã€æ‰‹æ‰“" class="headerlink" title="ä¸€ã€æ‰‹æ‰“"></a>ä¸€ã€æ‰‹æ‰“</h1><ul><li>æ‰‹åŠ¨æ›´æ”¹ç‰ˆæœ¬å·</li><li>æ‰‹åŠ¨å˜æˆæ›´æ–°æ—¥å¿—</li><li>æ‰‹åŠ¨å‘å¸ƒåˆ°npmç§æœ</li><li>å™¢è€¶ï¼Œå®Œå·¥</li></ul><div class="tip">ä½ ç¡®å®šä½ æ˜¯è®¤çœŸçš„ä¹ˆâ“ï¸â“ï¸â“ï¸æ‰‹åŠ¨é»‘äººé—®å·è„¸éƒ½2020å¹´äº†è¿˜ä¸èƒ½è‡ªåŠ¨åŒ–å—ï¼Ÿ</div><h1 id="äºŒã€è‡ªåŠ¨åŒ–"><a href="#äºŒã€è‡ªåŠ¨åŒ–" class="headerlink" title="äºŒã€è‡ªåŠ¨åŒ–"></a>äºŒã€è‡ªåŠ¨åŒ–</h1><p>å›åˆ°æ­£é¢˜ï¼Œå¦‚æœæœ‰ä¸€ç§å·¥å…·ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•è¾“å…¥å‘½ä»¤è¡Œï¼Œè½»è½»æ•²ä¸€ä¸‹å›è½¦ï¼Œå°±å¯ä»¥è½»æ¾å¸®æˆ‘ä»¬å®Œæˆæ‰‹åŠ¨çš„é‚£äº›å·¥ä½œï¼Œã€‚æˆ‘ä»¬åªéœ€è¦å™¢è€¶ï¼Œå²‚ä¸å¿«å“‰ã€‚</p><p>äºæ˜¯ï¼Œåœ¨ä¼Ÿå¤§çš„githubä¸Šæ•æ‰åˆ°äº†ä»¥ä¸‹ä¸‰ç§å·¥å…·</p><ul><li>standard-version</li><li>semantic-release</li><li>lerna</li></ul><hr><blockquote><p>è®©æˆ‘ä»¬æ¥è¯¦ç»†çš„åˆ†åˆ«äº†è§£ä¸€ä¸‹è¿™ä¸‰ä½é€‰æ‰‹</p></blockquote><h2 id="1ã€Lerna"><a href="#1ã€Lerna" class="headerlink" title="1ã€Lerna"></a>1ã€Lerna</h2><p>ä¸ç”¨è¯´ã€‚å…ˆæ·˜æ±°å§ğŸ˜‚ï¸ã€‚æ¯•ç«Ÿè¿™å®¶ä¼™æ ¸å¿ƒä»·å€¼æ˜¯å¤šé¡¹ç›®ç®¡ç†ï¼Œè·Ÿæˆ‘ä»¬çš„éœ€æ±‚æ¯«ä¸æ²¾è¾¹</p><h2 id="2ã€standard-version"><a href="#2ã€standard-version" class="headerlink" title="2ã€standard-version"></a>2ã€standard-version</h2><p>æ ¹æ®ä»‹ç»ï¼Œå®ƒçš„æ ¸å¿ƒä»·å€¼è§‚åœ¨äºè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ã€æ‰“tagä»¥åŠCHANGELOGç”Ÿæˆã€‚æ›´ä¸ºåŠ åˆ†çš„æ˜¯å®ƒè¿˜æ˜¯ä»£ç æäº¤è§„èŒƒç»„ç»‡çš„å®˜æ–¹å‡ºå“<br><img src="/images/version-management/standard-version.png" alt="sv"></p><blockquote><p>A utility for versioning using semver and CHANGELOG generation powered by Conventional Commits. </p></blockquote><p>å¬ä¸Šå»è›®ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿç®€å•</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">standard-version</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„æ—¥å¸¸éœ€æ±‚ã€‚ä½¿ç”¨èµ·æ¥ä¹Ÿæ»¡è¶³æˆ‘ä»¬çš„åˆå§‹ç›®æ ‡ï¼Œä¸€é”®Enterï¼Œæå®šæ‰€æœ‰ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ›´æ”¹æ¨é€åˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”å‘å¸ƒå°±å¥½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push --follow-tags origin master &amp;&amp; npm publish</span><br></pre></td></tr></table></figure><h2 id="3ã€semantic-release"><a href="#3ã€semantic-release" class="headerlink" title="3ã€semantic-release"></a>3ã€semantic-release</h2><p>æ‰“å¼€æ–‡æ¡£ä»‹ç»ï¼ŒåŸæ¥è¿™è´§çš„æ ¸å¿ƒé©±åŠ¨åŠ›åœ¨äºworkflowã€‚</p><blockquote><p>semantic-release automates the whole package release workflow including: determining the next version number, generating the release notes and publishing the package.</p></blockquote><p>ç›¸æ¯”æ¥¼ä¸Šé‚£ä½ï¼Œè¯¥é€‰æ‰‹ç»™æˆ‘ä»¬æä¾›äº†ä¸€æ•´å¥—å®Œå¤‡çš„å·¥ä½œæµï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥:</p><ul><li>å…¨è‡ªåŠ¨release</li><li>å¼ºåˆ¶è¯­ä¹‰åŒ–è¯´æ˜</li><li>æ’ä»¶åŒ–é…ç½®</li><li>ä¸CI/CDé»˜è®¤é›†æˆ<br>å‰©ä¸‹çš„è¿˜æœ‰å¥½å¤šã€‚ã€‚ã€‚å¤§å®¶å¯ä»¥å»å®˜ç½‘çœ‹ã€‚ã€‚ã€‚</li></ul><p>ä½¿ç”¨æ–¹æ³•<br>Aã€ä½¿ç”¨çš„è¯ä¼šç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œç±»ä¼¼babelï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ª <strong>.releaserc</strong> æ–‡ä»¶è¿›è¡Œæ’ä»¶é…ç½®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;branches&quot;</span>: <span class="string">&quot;master&quot;</span>,</span><br><span class="line">  <span class="comment">// &quot;debug&quot;: true,</span></span><br><span class="line">  <span class="comment">// &quot;dryRun&quot;: true, // semantic-releaseé»˜è®¤åœ¨ciä¸­å·¥ä½œï¼Œå¦‚æœéœ€è¦è°ƒè¯•å¯ä»¥æ‰“å¼€è¿™ä¸ªå¼€å…³</span></span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;@semantic-release/commit-analyzer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@semantic-release/release-notes-generator&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@semantic-release/changelog&quot;</span>,</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@semantic-release/npm&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;npmPublish&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;tarballDir&quot;</span>: <span class="string">&quot;dist&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@semantic-release/git&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;assets&quot;</span>: [<span class="string">&quot;package.json&quot;</span>, <span class="string">&quot;CHANGELOG.md&quot;</span>],</span><br><span class="line">        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;chore(è›‹ç³•):$&#123;nextRelease.version&#125; [skip ci]\n\n$&#123;nextRelease.notes&#125;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@semantic-release/gitlab&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;gitlabUrl&quot;</span>: <span class="string">&quot;https://git.com/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;assets&quot;</span>: <span class="string">&quot;dist/*.tgz&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;preset&quot;</span>: <span class="string">&quot;angular&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Bã€åŒæ—¶éœ€è¦åœ¨ciä¸­å¢åŠ é…ç½®ï¼Œåœ¨é¡¹ç›®ä¸­é…ç½®CIæ‰€éœ€è¦çš„ç¯å¢ƒå˜é‡,åŒ…æ‹¬<code>GL_TOKEN</code>ã€<code>NPM_USERNAME</code>ã€<code>NPM_EMAIL</code>ã€<code>NPM_PASSWORD</code>ç­‰</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="comment"># - test</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">publish:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">node:10</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&#x27;//registry.npm.org/:username=$&#123;NPM_USERNAME&#125;&#x27;</span><span class="string">&gt;&gt;.npmrc</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&#x27;//registry.npm.org/:email=$&#123;NPM_EMAIL&#125;&#x27;</span><span class="string">&gt;&gt;.npmrc</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&#x27;//registry.npm.org/:_password=$&#123;NPM_PASSWORD&#125;&#x27;</span><span class="string">&gt;&gt;.npmrc</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npx</span> <span class="string">semantic-release</span></span><br></pre></td></tr></table></figure><p>Cã€æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œéœ€è¦åœ¨gitlabä¸­å¼€å¯<code>PersonalAccessToken</code>ï¼ˆå‰ææ˜¯å¼€å¯2FAé…ç½®ï¼Œç…§ç€æ­¥éª¤èµ°ï¼ŒæŒºéº»çƒ¦çš„ä¹Ÿèƒ½èµ°é€šï¼‰ï¼Œå¹¶è®¾ç½®åœ¨CI/CDçš„å˜é‡ä¸­<br><img src="/images/version-management/pas.png" alt="pat"></p><p>Dã€ä¸Šè¿°æ­¥éª¤åšå¥½ï¼Œä¾¿å¯ä»¥æŠŠæ‰€æœ‰æ”¹åŠ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œåç­‰å®ƒå¸¦ç»™ä½ çš„æƒŠå–œ</p><div class="tip">å“ˆå“ˆï¼Œå…¶å®é™¤äº†è·Ÿæ¥¼ä¸Šä¸€æ ·çš„æ•ˆæœä¹‹å¤–ï¼Œè¿˜é¢å¤–ç”Ÿæˆäº†gitLabä¸­çš„Releaseã€‚å½“ç„¶å¦‚æœä¸éœ€è¦çš„è¯ä¹Ÿå¯ä»¥å¹²æ‰å®ƒï¼Œä¸è¿‡è¿™ä¹ˆä¸“ä¸šçš„æ“ä½œï¼Œä¸ºå•¥ä¸ä¿ç•™å‘¢ï¼Œå¯¹ä¸å¯¹~ğŸ˜„ï¸</div><h2 id="4ã€standard-version-VS-semantiv-release"><a href="#4ã€standard-version-VS-semantiv-release" class="headerlink" title="4ã€standard-version VS semantiv-release"></a>4ã€standard-version VS semantiv-release</h2><table><thead><tr><th align="center">åŠŸèƒ½ç‚¹</th><th align="center">standard-version</th><th align="center">semantic-release</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">ç‰ˆæœ¬æ§åˆ¶</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">ä¼šæ ¹æ®æäº¤çš„ä¿¡æ¯ç±»å‹æ¥è‡ªåŠ¨æ›´æ”¹å¯¹åº”çš„ç‰ˆæœ¬å·,å¦‚ä¸‹:<br> feat: æ¬¡ç‰ˆæœ¬(minor)+1 <br>  fix: ä¿®è®¢å·(patch) +1 <br> BREAK CHANGE: ä¸»æ¿å·(marjor) +1</td></tr><tr><td align="center">CHANGELOG</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">å‡åŸºäºAngular Commit è§„åˆ™</td></tr><tr><td align="center">gitTagæ ‡è®°</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center"></td></tr><tr><td align="center">npmè‡ªåŠ¨å‘å¸ƒ</td><td align="center"></td><td align="center">âœ…</td><td align="center"></td></tr><tr><td align="center">CIé›†æˆ</td><td align="center">âš ï¸ï¸</td><td align="center">âœ…</td><td align="center">standard-version å¯ä»¥æ‰‹åŠ¨å®ç°</td></tr><tr><td align="center">pre-releaseå®ç°</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">standard-versionï¼šé€šè¿‡å¯é€‰å‚æ•°<br>semantic-release:é€šè¿‡åˆ†æ”¯è®¾ç½®</td></tr><tr><td align="center">gitlab release</td><td align="center"></td><td align="center">âœ…</td><td align="center"></td></tr></tbody></table><h1 id="ä¸‰ã€ç»“è®º"><a href="#ä¸‰ã€ç»“è®º" class="headerlink" title="ä¸‰ã€ç»“è®º"></a>ä¸‰ã€ç»“è®º</h1><p>standard-versionä¸semantic-release éƒ½æ˜¯ä»¤äººæƒŠå¹çš„å·¥å…·ï¼Œä¸ç®¡ä½¿ç”¨å“ªä¸€ä¸ªéƒ½èƒ½å¤Ÿæœ€å¤§é™åº¦çš„æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚å½“ç„¶ä¸¤ä¸ªå·¥å…·çš„ä¾§é‡ç‚¹æ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©ã€‚<br>åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼š</p><div class="tip">standard-version åå‘äºå°å·¥å…·å¼€å‘ï¼Œè‡ªè¡Œå†³å®šç±»åº“çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å‘å¸ƒå‰è¿›è¡Œä¿®æ”¹semantic-release åå‘äºworkflowï¼Œå¤šäººåä½œä¸‹é€šè¿‡mrè¿›è¡Œéœ€æ±‚çš„è¿­ä»£</div>å½“ç„¶ï¼Œæ— è®ºé‡‡å–å“ªç§å§¿åŠ¿ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<p><img src="/images/version-management/dkam.png" alt="killAllHumans"><br>å®Œ~</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨æˆ‘ä»¬æ—¥å¸¸Codingè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šæœ‰å¼€å‘ç±»åº“çš„éœ€æ±‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ¶æ„" scheme="https://tauleos.github.io/tags/%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>ç»†è¯´HTTP Cache</title>
    <link href="https://tauleos.github.io/fa64e05e0810.html"/>
    <id>https://tauleos.github.io/fa64e05e0810.html</id>
    <published>2019-05-07T02:27:48.000Z</published>
    <updated>2019-05-07T06:18:27.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/1557042361870.png" alt="headers"></p><a id="more"></a><p>åœ¨ä¹‹å‰çš„æ–‡ç« <a href="https://tauleos.github.io/2019/04/12/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%90%86%E8%AE%BA/">æµè§ˆå™¨ç¼“å­˜ç†è®º</a>ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è§£é‡Šäº†æµè§ˆå™¨ç¼“å­˜çš„å‡ ç§æ–¹å¼ï¼Œå…¶ä¸­çš„Disk Cacheä¸»è¦ä½¿ç”¨çš„ä¾¿æ˜¯HTTPåè®®ä¸­çš„ç¼“å­˜æœºåˆ¶ã€‚æµè§ˆå™¨ä¼šæ ¹æ®è¯·æ±‚çš„ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä¼šåˆ¤æ–­æ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®è¿˜æ˜¯å‘æœåŠ¡å™¨å‘è¯·æ±‚åˆ¤æ–­ç¼“å­˜çš„æœ‰æ•ˆæ€§ï¼Œå‰è€…è¢«ç§°ä¸º<strong>å¼ºç¼“å­˜</strong>ï¼Œåè€…è¢«ç§°ä¸º<strong>åå•†ç¼“å­˜</strong>ã€‚</p><h2 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h2><p>å³ä¸ä¼šå‘æœåŠ¡å™¨å‘è¯·æ±‚è·å–èµ„æºï¼Œç›´æ¥åœ¨ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚åœ¨æ§åˆ¶å°ä¸­ HTTP status ä¸º200,Size æ˜¾ç¤ºfrom memory cache æˆ–è€… from disk cache;ç”±ä¸¤ä¸ªhttp header å­—æ®µæ¥æ§åˆ¶ï¼š<strong>Expireså’ŒCache-Control</strong>ã€‚</p><h3 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h3><ul><li>ç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸçš„æ—¶é—´,æ˜¯ä¸€ä¸ªå…·ä½“çš„æ—¶é—´ç‚¹ã€‚</li><li>æ˜¯HTTP/1çš„äº§ç‰©ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚</li></ul><h3 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h3><p>æ˜¯HTTP/1.1çš„äº§ç‰©ï¼Œå¯ä»¥ç»„åˆå¤šç§æŒ‡ä»¤</p><table><thead><tr><th>æŒ‡ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>public</td><td>è¡¨ç¤ºå¯ä»¥è¢«å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ç¼“å­˜</td></tr><tr><td>private</td><td>è¡¨ç¤ºåªå¯ä»¥è¢«å®¢æˆ·ç«¯ç¼“å­˜</td></tr><tr><td>max-age=30</td><td>èµ„æº30ç§’ä¹‹åå°±è¿‡æœŸï¼Œéœ€è¦é‡æ–°è¯·æ±‚</td></tr><tr><td>s-max-age=30</td><td>è¦†ç›–max-age,ä½œç”¨ç›¸åŒï¼Œåªåœ¨<strong>ä»£ç†æœåŠ¡å™¨</strong>ä¸­ç”Ÿæ•ˆ</td></tr><tr><td>no-store</td><td>ä¸ç¼“å­˜ä»»ä½•å“åº”</td></tr><tr><td>no-cache</td><td>èµ„æºä¼šè¢«ç¼“å­˜ï¼Œä½†æ˜¯ç«‹å³å¤±æ•ˆï¼Œä¸‹æ¬¡ä¼šå‘èµ·è¯·æ±‚éªŒè¯èµ„æºæ˜¯å¦è¿‡æœŸ</td></tr><tr><td>max-scale=30</td><td>30ç§’å†…ï¼Œå³ä½¿ç¼“å­˜è¿‡æœŸï¼Œä¹Ÿä½¿ç”¨è¯¥èµ„æº(æ— æ•Œé‡‘èº«æœŸ)</td></tr><tr><td>min-fresh=30</td><td>å¸Œæœ›åœ¨30ç§’å†…è·å–æœ€æ–°çš„å“åº”</td></tr></tbody></table><div class="tip">å¼ºç¼“å­˜åˆ¤æ–­æ˜¯å¦ç¼“å­˜çš„ä¾æ®æ¥è‡ªäºæ˜¯å¦è¶…å‡ºæŸä¸ªæ—¶é—´æˆ–è€…æŸä¸ªæ—¶é—´æ®µï¼Œè€Œä¸å…³å¿ƒæœåŠ¡å™¨ç«¯æ–‡ä»¶æ˜¯å¦å·²ç»æ›´æ–°</div><h2 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h2><p>åœ¨å¼ºç¼“å­˜å¤±æ•ˆä¹‹åï¼Œæµè§ˆå™¨ä¼šæºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®ç¼“å­˜æ ‡è¯†æ¥å’Œæµè§ˆå™¨åå•†èµ„æºçš„ç¼“å­˜æƒ…å†µï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¹‹ä¸ºåå•†ç¼“å­˜ã€‚åå•†æˆåŠŸï¼Œè¿”å›304å’Œç©ºçš„å“åº”ä½“ï¼Œåå•†å¤±è´¥ï¼Œè¿”å›200å’Œæ–°çš„èµ„æºã€‚</p><h2 id="Last-Modifiedå’ŒIf-Modified-Since"><a href="#Last-Modifiedå’ŒIf-Modified-Since" class="headerlink" title="Last-Modifiedå’ŒIf-Modified-Since"></a>Last-Modifiedå’ŒIf-Modified-Since</h2><ul><li>æµè§ˆå™¨åœ¨ç¬¬ä¸€æ¬¡è®¿é—®èµ„æºçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šåœ¨response headerä¸­åŠ å…¥last-Modified=timevalue(è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´)ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°å“åº”ï¼Œä¼šå°†èµ„æºå’Œheaderä¸€åŒç¼“å­˜èµ·æ¥ã€‚</li><li>æµè§ˆå™¨å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œä¼šå°†Last-Modifiedçš„å€¼timevalueæ”¾åœ¨If-Modified-Sinceä¸­ï¼Œå³If-Modified-Since=timevalue</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œä¼šå°†timevalueä¸è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–ï¼Œè¿”å›304å’Œç©ºçš„å“åº”ä½“ï¼Œå¦‚æœtimevalueå°äºæœ€åä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜èµ„æºå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿”å›200å’Œæ–°çš„èµ„æºã€‚</li></ul><p>ä½†æ˜¯Last-Modifiedå­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š</p><ul><li>å¦‚æœæœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œä¸ç®¡æœ‰æ²¡æœ‰ä¿®æ”¹ï¼Œéƒ½ä¼šé€ æˆLast-Modified çš„å€¼å‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡ç«¯ä¸èƒ½å‘½ä¸­ç¼“å­˜å¯¼è‡´å‘é€åŒæ ·çš„èµ„æº</li><li>å› ä¸ºLast-Modifiedçš„å€¼æ˜¯ä»¥ç§’ä¸ºæœ€å°å•ä½ï¼Œå¦‚æœåœ¨ä¸å¯æ„ŸçŸ¥çš„æ—¶é—´å†…ä¿®æ”¹å®Œæˆæ–‡ä»¶ï¼ŒæœåŠ¡ç«¯è¿˜æ˜¯ä¼šè®¤ä¸ºèµ„æºä¼šå‘½ä¸­ï¼Œä¸è¿”å›æ­£ç¡®çš„èµ„æºã€‚</li></ul><h2 id="Etagå’ŒIf-None-Match"><a href="#Etagå’ŒIf-None-Match" class="headerlink" title="Etagå’ŒIf-None-Match"></a>Etagå’ŒIf-None-Match</h2><p><strong>Etagæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›å½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†(ç”±æœåŠ¡å™¨ç”Ÿæˆ)ï¼Œåªè¦èµ„æºæœ‰å˜åŒ–ï¼ŒEtagå°±ä¼šé‡æ–°ç”Ÿæˆ</strong>ã€‚</p><ul><li>åŒä¸Šé¢Last_Modifiedç±»ä¼¼,ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ ‡ç¤ºä½œä¸ºEtagçš„å€¼(hashvalue)è¿”å›ç»™æµè§ˆå™¨</li><li>æµè§ˆå™¨å†æ¬¡è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼Œä¼šæŠŠhashvalue(Etagçš„å€¼)ä½œä¸ºè¯·æ±‚å¤´é‡Œçš„If-None-Match çš„å€¼ã€‚æœåŠ¡å™¨åªéœ€è¦æ¯”å¯¹è¿™ä¸¤ä¸ªå€¼æ˜¯å¦ä¸€è‡´ï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°åˆ¤æ–­èµ„æºæœ‰æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚</li></ul><h2 id="äºŒè€…å¯¹æ¯”"><a href="#äºŒè€…å¯¹æ¯”" class="headerlink" title="äºŒè€…å¯¹æ¯”"></a>äºŒè€…å¯¹æ¯”</h2><ul><li>åœ¨ç²¾åº¦ä¸Šï¼ŒEtagä¼˜äºLast-Modified</li><li>åœ¨æ€§èƒ½ä¸Šï¼ŒEtagé€ŠäºLast-Modified</li><li>åœ¨ä¼˜å…ˆçº§ä¸Šï¼ŒEtagé«˜äºLast-Modified</li></ul><h1 id="ç¼“å­˜ä¼˜å…ˆçº§"><a href="#ç¼“å­˜ä¼˜å…ˆçº§" class="headerlink" title="ç¼“å­˜ä¼˜å…ˆçº§"></a>ç¼“å­˜ä¼˜å…ˆçº§</h1><ul><li>å¼ºç¼“å­˜ä¼˜å…ˆäºåå•†ç¼“å­˜</li><li>å¦‚æœæ²¡æœ‰è®¾ç½®ä»»ä½•ç¼“å­˜ç­–ç•¥ï¼Œæµè§ˆå™¨ä¼šé‡‡ç”¨å¯å‘å¼ç®—æ³•ï¼Œé€šå¸¸ä¼šå–å“åº”å¤´ä¸­çš„Dateå‡å»Last-Modified å€¼çš„ 10% ä½œä¸ºç¼“å­˜æ—¶é—´ã€‚</li></ul><p>å‚è€ƒæ–‡ç« </p><p><a href="https://juejin.im/post/5c22ee806fb9a049fb43b2c5">ä¸€æ–‡è¯»æ‡‚å‰ç«¯ç¼“å­˜</a></p><p><a href="https://www.jianshu.com/p/54cc04190252">æ·±å…¥ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</a></p><p><a href="http://www.alloyteam.com/2016/03/discussion-on-web-caching/">æµ…è°ˆWebç¼“å­˜</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/images/1557042361870.png&quot; alt=&quot;headers&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="ç†è®º" scheme="https://tauleos.github.io/tags/%E7%90%86%E8%AE%BA/"/>
    
    <category term="http" scheme="https://tauleos.github.io/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="https://tauleos.github.io/5720ed7e6faf.html"/>
    <id>https://tauleos.github.io/5720ed7e6faf.html</id>
    <published>2019-04-26T09:05:02.000Z</published>
    <updated>2019-05-07T06:14:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»„ä»¶ä»è¢«åˆ›å»ºåˆ°è¢«é”€æ¯çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚Reactä¸ºç»„ä»¶åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæä¾›äº†ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´å¥½åœ°æ§åˆ¶ç»„ä»¶çš„è¡Œä¸ºã€‚<br> <strong>æ³¨æ„ï¼šåªæœ‰class component æ‰å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œfunctional component æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ã€‚å› æ­¤ä¸è¦åœ¨functional componentä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</strong></p><a id="more"></a><h1 id="ç”Ÿå‘½å‘¨æœŸå¦‚å›¾æ‰€ç¤º"><a href="#ç”Ÿå‘½å‘¨æœŸå¦‚å›¾æ‰€ç¤º" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå¦‚å›¾æ‰€ç¤º"></a>ç”Ÿå‘½å‘¨æœŸå¦‚å›¾æ‰€ç¤º</h1><p><img src="/images/1556269802577.webp" alt="ç”Ÿå‘½å‘¨æœŸå›¾"></p><h1 id="ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ"></a>ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ</h1><h2 id="æŒ‚è½½é˜¶æ®µ"><a href="#æŒ‚è½½é˜¶æ®µ" class="headerlink" title="æŒ‚è½½é˜¶æ®µ"></a>æŒ‚è½½é˜¶æ®µ</h2><blockquote><p>è¿™ä¸ªé˜¶æ®µç»„ä»¶è¢«åˆ›å»ºï¼Œæ‰§è¡Œåˆå§‹åŒ–,å¹¶è¢«æŒ‚è½½åˆ°DOMä¸­ï¼Œå®Œæˆç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ã€‚è¯¥é˜¶æ®µçš„æ–¹æ³•æœ‰:</p><p>1.<a href="#constructor">constructor</a><br>2.<a href="#componentWillMount">componentWillMount</a><br>3.<a href="#render">render</a><br>4.<a href="#componentDidMount">componentDidMount</a></p></blockquote><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>è¿™æ˜¯ES6çš„<strong>class</strong>çš„æ„é€ æ–¹æ³•ï¼Œé€šå¸¸ç”¨äº<strong>åˆå§‹åŒ–ç»„ä»¶çš„stateä»¥åŠç»‘å®šäº‹ä»¶å¤„ç†æ–¹æ³•ç­‰å·¥ä½œ</strong></p><h3 id="componentWillMount"><a href="#componentWillMount" class="headerlink" title="componentWillMount"></a>componentWillMount</h3><p>è¿™ä¸ªæ–¹æ³•åœ¨ç»„ä»¶è¢«æŒ‚è½½åˆ°DOMå‰è°ƒç”¨ï¼Œ<strong>ä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</strong>ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨å®é™…é¡¹ç›®ä¸­<strong>å¾ˆå°‘</strong>ä¼šç”¨åˆ°ï¼Œå› ä¸ºå¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­æ‰§è¡Œçš„å·¥ä½œéƒ½å¯ä»¥æå‰åˆ°<strong>constructor</strong>ä¸­ã€‚<strong>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setStateä¸ä¼šå¼•èµ·ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</strong></p><h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p>æ ¹æ®ç»„ä»¶çš„popså’Œstateè¿”å›ä¸€ä¸ªReactå…ƒç´ ï¼Œè¯¥å…ƒç´ ç”¨äºæè¿°ç»„ä»¶çš„UIã€‚åœ¨è¯¥æ–¹æ³•ä¸­ä¸èƒ½æ‰§è¡Œä»»ä½•æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œæ‰€ä»¥ä¸èƒ½åœ¨renderä¸­è°ƒç”¨setStateï¼Œä¼šæ”¹å˜ç»„ä»¶çš„çŠ¶æ€ã€‚</p><h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><p>åœ¨ç»„ä»¶è¢«æŒ‚è½½åˆ°DOMåè°ƒç”¨ï¼Œ<strong>ä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</strong>ã€‚è¿™ä¸ªæ—¶å€™å·²ç»å¯ä»¥è·å–åˆ°DOMç»“æ„ï¼Œ<strong>å› æ­¤ä¾èµ–DOMèŠ‚ç‚¹çš„æ“ä½œå¯ä»¥æ”¾åˆ°è¿™ä¸ªæ–¹æ³•ä¸­ã€‚è¿™ä¸ªæ–¹æ³•é€šå¸¸è¿˜ç”¨äºå‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®</strong>ã€‚è°ƒç”¨this.setState ä¼šå¼•èµ·ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><h2 id="æ›´æ–°é˜¶æ®µ"><a href="#æ›´æ–°é˜¶æ®µ" class="headerlink" title="æ›´æ–°é˜¶æ®µ"></a>æ›´æ–°é˜¶æ®µ</h2><p>ç»„ä»¶è¢«æŒ‚è½½åˆ°DOMåï¼Œç»„ä»¶çš„propsæˆ–stateæ”¹å˜ä¼šå¼•èµ·ç»„ä»¶çš„æ›´æ–°ã€‚</p><ul><li>propså¼•èµ·çš„æ›´æ–°ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”±æ¸²æŸ“è¯¥ç»„ä»¶çš„çˆ¶ç»„ä»¶å¼•èµ·çš„(ä¹Ÿå°±æ˜¯å½“çˆ¶ç»„ä»¶çš„renderæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶ä¼šå‘ç”Ÿæ›´æ–°è¿‡ç¨‹)ï¼Œæ— è®ºpropsæ˜¯å¦æ”¹å˜ï¼Œçˆ¶ç»„ä»¶renderæ–¹æ³•æ¯ä¸€æ¬¡è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´ç»„ä»¶æ›´æ–°ã€‚</li><li>stateå¼•èµ·çš„ç»„ä»¶æ›´æ–°ï¼Œæ˜¯é€šè¿‡this.setStateä¿®æ”¹ç»„ä»¶çš„stateè§¦å‘çš„ã€‚<br>ç»„ä»¶æ›´æ–°é˜¶æ®µä¾æ¬¡è°ƒç”¨çš„æ–¹æ³•æœ‰ï¼š</li></ul><p>1.<a href="#componentWillReceiveProps(nextProps)">componentWillReceiveProps</a><br>2.<a href="#shouldComponentUpdate(nextProps,nextState)">shouldComponentUpdate</a><br>3.<a href="#componentWillUpdate">componentWillUpdate</a><br>4.<a href="#render">render</a><br>5.<a href="#componentDidUpdate(prevProps,prevState)">componentDidUpdate</a></p><h3 id="componentWillReceiveProps-nextProps"><a href="#componentWillReceiveProps-nextProps" class="headerlink" title="componentWillReceiveProps(nextProps)"></a>componentWillReceiveProps(nextProps)</h3><ul><li>è¯¥æ–¹æ³•åªåœ¨propså¼•èµ·çš„ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚stateå¼•èµ·çš„ç»„ä»¶æ›´æ–°å¹¶ä¸ä¼šè§¦å‘ã€‚</li><li>nextPropsæ˜¯çˆ¶ç»„ä»¶ä¼ é€’ç»™å½“å‰ç»„ä»¶çš„æ–°çš„props</li><li>nextPropsçš„å€¼å¯èƒ½ä¸å­ç»„ä»¶å½“å‰propsçš„å€¼ç›¸åŒï¼Œå› æ­¤å¾€å¾€éœ€è¦æ¯”è¾ƒä»–ä¿©çš„å€¼æ¥å†³å®šæ˜¯å¦æ‰§è¡Œpropså‘ç”Ÿå˜åŒ–åçš„é€»è¾‘ã€‚</li><li><strong>åœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨setStateï¼Œåªæœ‰renderä»¥åŠä¹‹åçš„æ–¹æ³•ä¸­ã€‚this.stateæŒ‡å‘çš„æ‰æ˜¯æ›´æ–°åçš„stateã€‚åœ¨ä¹‹å‰çš„shouldComponentUpdateã€componentWillUpdateä¸­ã€‚this.stateæŒ‡å‘çš„è¿˜æ˜¯æ›´æ–°å‰çš„state</strong></li></ul><h3 id="shouldComponentUpdate-nextProps-nextState"><a href="#shouldComponentUpdate-nextProps-nextState" class="headerlink" title="shouldComponentUpdate(nextProps,nextState)"></a>shouldComponentUpdate(nextProps,nextState)</h3><ul><li>è¯¥æ–¹æ³•å†³å®šç»„ä»¶æ˜¯å¦ç»§ç»­æ‰§è¡Œæ›´æ–°è¿‡ç¨‹ã€‚å½“è¯¥æ–¹æ³•è¿”å›true(é»˜è®¤å€¼)æ—¶ç»§ç»­æ‰§è¡Œï¼Œè¿”å›falseæ—¶åœæ­¢æ‰§è¡Œ</li><li>ä¸€èˆ¬é€šè¿‡æ¯”è¾ƒnextPropsã€nextStateä¸ç»„ä»¶å½“å‰çš„propsã€stateæ¥å†³å®šè¿”å›å€¼ã€‚</li><li>è¯¥æ–¹æ³•å¯ç”¨æ¥å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œä»è€Œ<strong>ä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½</strong></li></ul><h3 id="componentWillUpdate"><a href="#componentWillUpdate" class="headerlink" title="componentWillUpdate"></a>componentWillUpdate</h3><p>è¯¥æ–¹æ³•åœ¨ç»„ä»¶renderä¹‹å‰è°ƒç”¨æ‰§è¡Œï¼Œå¯ä»¥ä½œä¸ºç»„ä»¶æ›´æ–°å‰æ‰§è¡ŒæŸäº›å·¥ä½œçš„åœ°æ–¹ã€‚ä¸€èˆ¬å¾ˆå°‘ç”¨åˆ°</p><blockquote><p>shouldComponentUpdate ä¸componentWillUpdateä¸­ä¸èƒ½è°ƒç”¨this.setState,å¦åˆ™ä¼šå¼•èµ·å¾ªç¯è°ƒç”¨é—®é¢˜ï¼Œrenderæ°¸è¿œæ— æ³•è¢«è°ƒç”¨ï¼Œç»„ä»¶ä¹Ÿæ°¸è¿œæ— æ³•æ¸²æŸ“</p></blockquote><h3 id="componentDidUpdate-prevProps-prevState"><a href="#componentDidUpdate-prevProps-prevState" class="headerlink" title="componentDidUpdate(prevProps,prevState)"></a>componentDidUpdate(prevProps,prevState)</h3><p>ç»„ä»¶æ›´æ–°åè¢«è°ƒç”¨ï¼Œå¯ä»¥ä½œä¸ºæ“ä½œæ›´æ–°åçš„DOMçš„åœ°æ–¹ã€‚ä¸¤ä¸ªå‚æ•°ä»£è¡¨ç»„ä»¶æ›´æ–°å‰çš„propså’Œstate</p><h2 id="å¸è½½é˜¶æ®µ"><a href="#å¸è½½é˜¶æ®µ" class="headerlink" title="å¸è½½é˜¶æ®µ"></a>å¸è½½é˜¶æ®µ</h2><p>ç»„ä»¶çš„å¸è½½é˜¶æ®µåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š</p><h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h3><p>è¯¥æ–¹æ³•åœ¨ç»„ä»¶è¢«å¸è½½å‰è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚æ¸…æ¥šå®šæ—¶å™¨ï¼Œæ¸…é™¤<a href="#didMount">componentDidMount</a>ä¸­æ‰‹åŠ¨åˆ›å»ºçš„DOMå…ƒç´ ç­‰ç­‰ã€‚é˜²æ­¢å†…å­˜æ³„éœ²</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç»„ä»¶ä»è¢«åˆ›å»ºåˆ°è¢«é”€æ¯çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚Reactä¸ºç»„ä»¶åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæä¾›äº†ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´å¥½åœ°æ§åˆ¶ç»„ä»¶çš„è¡Œä¸ºã€‚&lt;br&gt; &lt;strong&gt;æ³¨æ„ï¼šåªæœ‰class component æ‰å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œfunctional component æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ã€‚å› æ­¤ä¸è¦åœ¨functional componentä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="js" scheme="https://tauleos.github.io/tags/js/"/>
    
    <category term="react" scheme="https://tauleos.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨ç¼“å­˜ç†è®º</title>
    <link href="https://tauleos.github.io/652b679860cc.html"/>
    <id>https://tauleos.github.io/652b679860cc.html</id>
    <published>2019-04-12T07:25:49.000Z</published>
    <updated>2019-05-07T06:07:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¼“å­˜å¯ä»¥è¯´æ˜¯æ€§èƒ½ä¼˜åŒ–ä¸­ç®€å•é«˜æ•ˆçš„ä¸€ç§ä¼˜åŒ–æ–¹å¼ï¼Œå¯ä»¥ç¼©çŸ­ç½‘é¡µè¯·æ±‚èµ„æºçš„è·ç¦»ï¼Œå‡å°‘å»¶è¿Ÿï¼Œå¹¶ä¸”ç”±äºç¼“å­˜æ–‡ä»¶å¯ä»¥é‡å¤åˆ©ç”¨ï¼Œè¿˜å¯ä»¥å‡å°‘å¸¦å®½ï¼Œé™ä½ç½‘ç»œè´Ÿè·ã€‚</p><a id="more"></a><h1 id="ç¼“å­˜ä½ç½®"><a href="#ç¼“å­˜ä½ç½®" class="headerlink" title="ç¼“å­˜ä½ç½®"></a>ç¼“å­˜ä½ç½®</h1><ul><li><a href="#Service-Worker">Service Worker</a></li><li><a href="#Memory-Cache">Memory Cache</a></li><li><a href="#DisK-Cache">DisK Cache</a></li><li><a href="#Push-Cache">Push Cache</a></li></ul><h2 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h2><p>Service Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨èƒŒåçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œä¸€èˆ¬å¯ä»¥ç”¨æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼Œå¿…é¡»åŸºäºHTTPSåè®®ã€‚<strong>Service Worker çš„ç¼“å­˜ä¸æµè§ˆå™¨å…¶ä»–å†…å»ºçš„ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±æ§åˆ¶ç¼“å­˜å“ªäº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…ç¼“å­˜ã€å¦‚ä½•è¯»å–ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜æ˜¯æŒç»­æ€§çš„ã€‚</strong><br>Service Worker å®ç°ç¼“å­˜åŠŸèƒ½ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li>æ³¨å†Œservice Worker</li><li>ç›‘å¬installæ—¶é—´</li><li>ç¼“å­˜éœ€è¦çš„æ–‡ä»¶</li></ul><p>ç¼“å­˜ä¹‹åï¼ŒService Worker å¯ä»¥æ‹¦æˆªä¸‹æ¬¡çš„è¯·æ±‚æ¥æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜ã€‚å¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œéœ€è¦ä½¿ç”¨fetchå‡½æ•°å»è¯·æ±‚æ•°æ®(æ ¹æ®ç¼“å­˜ä¼˜å…ˆçº§æ¥è·å–æ•°æ®ï¼›ä½†æ˜¯è¿˜æ˜¯ç°å®åœ¨Service Workerä¸­è·å–çš„å†…å®¹)ã€‚</p><h2 id="Memory-Cache"><a href="#Memory-Cache" class="headerlink" title="Memory Cache"></a>Memory Cache</h2><p>Memory Cache æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œä¸»è¦åŒ…æ‹¬å½“å‰é¡µé¢ä¸­å·²ç»æŠ“å–çš„èµ„æº(å·²ç»ä¸‹è½½çš„æ ·å¼ã€è„šæœ¬ã€å›¾ç‰‡ç­‰)ã€‚åœ¨å†…å­˜ä¸­è¯»å–ç¼“å­˜é€Ÿåº¦å¿«ï¼Œè¯»å–é«˜æ•ˆï¼Œä½†æ˜¯æŒç»­æ€§å¾ˆçŸ­ï¼Œä¼šè·Ÿéšè¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ã€‚<br>ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹èµ„æºä¼šè¢«ç¼“å­˜åœ¨Memory Cacheä¸­ï¼š</p><ul><li>è¢«é¢„åŠ è½½å™¨(Preloader)è·å–çš„ã€‚</li><li>é¢„åŠ è½½æŒ‡ä»¤(<link rel=preload>)</li><li>ä¹‹å‰çš„DOMé˜¶æ®µæˆ–è€…CSSè§„åˆ™å¼•èµ·çš„è¯·æ±‚ã€‚</li></ul><p>ä½†æ˜¯Memory Cacheä¸ä¼šè½»æ˜“çš„å‘½ä¸­ä¸€ä¸ªè¯·æ±‚ï¼Œé™¤äº†è¦æœ‰åŒ¹é…çš„URLï¼Œè¿˜è¦æœ‰ç›¸åŒçš„èµ„æºç±»å‹ã€CORSæ¨¡å¼ä»¥åŠä¸€äº›å…¶ä»–ç‰¹æ€§ã€‚</p><blockquote><p>Memory CacheåŒ¹é…è§„åˆ™åœ¨æ ‡å‡†ä¸­æ²¡æœ‰è¯¦å°½çš„æè¿°ï¼Œæ‰€ä»¥ä¸åŒçš„æµè§ˆå™¨å†…æ ¸åœ¨å®ç°ä¸Šä¼šæœ‰æ‰€ä¸åŒã€‚</p></blockquote><blockquote><p>Memory Cacheæ˜¯ä¸å…³å¿ƒHTTPè¯­ä¹‰çš„ï¼Œæ¯”å¦‚Cache-Control: max-age=0çš„èµ„æºï¼Œä»ç„¶å¯ä»¥åœ¨åŒä¸€ä¸ªå¯¼èˆªä¸­è¢«é‡ç”¨ã€‚ä½†æ˜¯åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ï¼ŒMemory Cacheä¼šéµå®ˆCache-Control: no-storeæŒ‡ä»¤ï¼Œä¸ç¼“å­˜ç›¸åº”çš„èµ„æºã€‚</p></blockquote><h2 id="Disk-Cache"><a href="#Disk-Cache" class="headerlink" title="Disk Cache"></a>Disk Cache</h2><p>Disk Cache ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„HTTP Cache,é¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œå…·æœ‰è¾ƒå¼ºçš„æ—¶æ•ˆæ€§å’Œå¤§çš„å®¹é‡æ€§ã€‚<br>æµè§ˆå™¨ä¼šæŠŠå“ªäº›æ–‡ä»¶ä¸¢è¿›å†…å­˜ä¸­ï¼Ÿå“ªäº›ä¸¢è¿›ç¡¬ç›˜ä¸­ï¼Ÿå…³äºè¿™ç‚¹ï¼Œç½‘ä¸Šè¯´æ³•ä¸ä¸€ï¼Œä¸è¿‡ä»¥ä¸‹è§‚ç‚¹æ¯”è¾ƒé å¾—ä½ï¼š</p><ul><li>å¯¹äºå¤§æ–‡ä»¶æ¥è¯´ï¼Œå¤§æ¦‚ç‡æ˜¯ä¸å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œåä¹‹ä¼˜å…ˆ</li><li>å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡é«˜çš„è¯ï¼Œæ–‡ä»¶ä¼˜å…ˆå­˜å‚¨è¿›ç¡¬ç›˜</li></ul><h2 id="Push-Cache"><a href="#Push-Cache" class="headerlink" title="Push Cache"></a>Push Cache</h2><p>Push Cacheï¼ˆæ¨é€ç¼“å­˜ï¼‰æ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚å®ƒåªåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±è¢«é‡Šæ”¾ï¼Œå¹¶ä¸”ç¼“å­˜æ—¶é—´ä¹Ÿå¾ˆçŸ­æš‚ï¼Œåœ¨Chromeæµè§ˆå™¨ä¸­åªæœ‰5åˆ†é’Ÿå·¦å³ï¼ŒåŒæ—¶å®ƒä¹Ÿå¹¶éä¸¥æ ¼æ‰§è¡ŒHTTPå¤´ä¸­çš„ç¼“å­˜æŒ‡ä»¤ã€‚</p><ul><li>æ‰€æœ‰çš„èµ„æºéƒ½èƒ½è¢«æ¨é€ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç¼“å­˜,ä½†æ˜¯ Edge å’Œ Safari æµè§ˆå™¨æ”¯æŒç›¸å¯¹æ¯”è¾ƒå·®</li><li>å¯ä»¥æ¨é€ no-cache å’Œ no-store çš„èµ„æº</li><li>ä¸€æ—¦è¿æ¥è¢«å…³é—­ï¼ŒPush Cache å°±è¢«é‡Šæ”¾</li><li>å¤šä¸ªé¡µé¢å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªHTTP/2çš„è¿æ¥ï¼Œä¹Ÿå°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªPush Cacheã€‚è¿™ä¸»è¦è¿˜æ˜¯ä¾èµ–æµè§ˆå™¨çš„å®ç°è€Œå®šï¼Œå‡ºäºå¯¹æ€§èƒ½çš„è€ƒè™‘ï¼Œæœ‰çš„æµè§ˆå™¨ä¼šå¯¹ç›¸åŒåŸŸåä½†ä¸åŒçš„tabæ ‡ç­¾ä½¿ç”¨åŒä¸€ä¸ªHTTPè¿æ¥ã€‚</li><li>Push Cache ä¸­çš„ç¼“å­˜åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡</li><li>æµè§ˆå™¨å¯ä»¥æ‹’ç»æ¥å—å·²ç»å­˜åœ¨çš„èµ„æºæ¨é€</li><li>ä½ å¯ä»¥ç»™å…¶ä»–åŸŸåæ¨é€èµ„æº</li></ul><blockquote><p>å¦‚æœä»¥ä¸Šå››ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œé‚£ä¹ˆåªèƒ½å‘èµ·è¯·æ±‚æ¥è·å–èµ„æºäº†ã€‚</p></blockquote><h1 id="ç¼“å­˜è¿‡ç¨‹åˆ†æ"><a href="#ç¼“å­˜è¿‡ç¨‹åˆ†æ" class="headerlink" title="ç¼“å­˜è¿‡ç¨‹åˆ†æ"></a>ç¼“å­˜è¿‡ç¨‹åˆ†æ</h1><p><img src="/images/1557055357514.png" alt="img"><br>ç”±ä¸Šå›¾å¯çŸ¥ï¼š</p><ul><li>æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æœä»¥åŠç¼“å­˜æ ‡è¯†</li><li>æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›çš„è¯·æ±‚ç»“æœéƒ½ä¼šå°†è¯¥ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­<br>ä»¥ä¸Šä¸¤ç‚¹ç»“è®ºå°±æ˜¯æµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„å…³é”®ï¼Œå®ƒç¡®ä¿äº†æ¯ä¸ªè¯·æ±‚çš„ç¼“å­˜å­˜å…¥ä¸è¯»å–</li></ul><p>å‚è€ƒï¼š<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control">mdn</a><br><a href="https://www.jianshu.com/p/54cc04190252">æ·±å…¥ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç¼“å­˜å¯ä»¥è¯´æ˜¯æ€§èƒ½ä¼˜åŒ–ä¸­ç®€å•é«˜æ•ˆçš„ä¸€ç§ä¼˜åŒ–æ–¹å¼ï¼Œå¯ä»¥ç¼©çŸ­ç½‘é¡µè¯·æ±‚èµ„æºçš„è·ç¦»ï¼Œå‡å°‘å»¶è¿Ÿï¼Œå¹¶ä¸”ç”±äºç¼“å­˜æ–‡ä»¶å¯ä»¥é‡å¤åˆ©ç”¨ï¼Œè¿˜å¯ä»¥å‡å°‘å¸¦å®½ï¼Œé™ä½ç½‘ç»œè´Ÿè·ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="ç†è®º" scheme="https://tauleos.github.io/tags/%E7%90%86%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>å¤ªæå›¾æ¡ˆ</title>
    <link href="https://tauleos.github.io/3710a8c65723.html"/>
    <id>https://tauleos.github.io/3710a8c65723.html</id>
    <published>2019-04-12T07:25:18.000Z</published>
    <updated>2020-10-20T06:15:36.890Z</updated>
    
    <content type="html"><![CDATA[<div class="yinyang"></div><style>  .yinyang{    display:flex;    align-items:center;    --color1: white;    --color2: black;    border-radius: 50%;    box-shadow:0 0 1em rgba(0,0,0,0.3);    width:20em;    height:20em;    /* background:lightgray; */    background-image: linear-gradient(var(--color1) 50% ,var(--color2) 50%);    animation:rotating linear 3s infinite;  }  .yinyang::before{    content:'';    box-sizing:border-box;    width:50%;    height:50%;    border-radius:50%;    border: 3em solid var(--color1);    background-color: var(--color2);    /* mix-blend-mode:screen; */  }  .yinyang::after{    content:'';    box-sizing:border-box;    width:50%;    height:50%;    border-radius:50%;    border: 3em solid var(--color2);    background-color: var(--color1);    /* mix-blend-mode:screen; */  }  @keyframes rotating {    to{      transform: rotate(360deg);    }  }</style>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;yinyang&quot;&gt;&lt;/div&gt;
&lt;style&gt;
  .yinyang{
    display:flex;
    align-items:center;
    --color1: white;
    --color2: black;
    bord</summary>
      
    
    
    
    
    <category term="css" scheme="https://tauleos.github.io/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>jsæºç å®ç°-call,apply,bind</title>
    <link href="https://tauleos.github.io/633b725634cd.html"/>
    <id>https://tauleos.github.io/633b725634cd.html</id>
    <published>2019-04-12T07:13:59.000Z</published>
    <updated>2020-10-27T03:47:02.126Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><blockquote><p><code>callã€applyã€bind</code> æœ¬è´¨éƒ½æ˜¯æ”¹å˜ <code>this</code> çš„æŒ‡å‘ï¼Œä¸åŒç‚¹ <code>callã€apply</code> æ˜¯ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œ<code>bind</code> æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚<code>call</code> è·Ÿ <code>apply</code> å°±åªæœ‰å‚æ•°ä¸Šä¸åŒã€‚</p><blockquote><p>åŒºåˆ«å°±æ˜¯<code>call()</code>æ–¹æ³•æ¥å—çš„æ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œ<code>apply()</code>æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ã€‚</p></blockquote></blockquote><h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><ul><li>ç®­å¤´å‡½æ•°çš„ <code>this</code> æ°¸è¿œæŒ‡å‘å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸ</li><li>å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ç”¨ <code>new</code> å…³é”®å­—è°ƒç”¨æ—¶ï¼Œä¸åº”è¯¥æ”¹å˜å…¶ <code>this</code> æŒ‡å‘ï¼Œå› ä¸º <code>newç»‘å®š</code> çš„ä¼˜å…ˆçº§é«˜äº <code>æ˜¾ç¤ºç»‘å®š</code> å’Œ <code>ç¡¬ç»‘å®š</code></li></ul><p>ä»£ç å®ç°</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">&#x27;must be a function&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ‹¿åˆ°å‚æ•°ä¼ ç»™è°ƒç”¨è€…</span></span><br><span class="line">  <span class="keyword">const</span> self = <span class="built_in">this</span>,</span><br><span class="line">  <span class="comment">// æ„å»ºä¸€ä¸ªå¹²å‡€çš„å‡½æ•°ï¼Œç”¨äºä¿å­˜åŸå‡½æ•°çš„åŸå‹</span></span><br><span class="line">  nop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  <span class="comment">// ç»‘å®šçš„å‡½æ•°</span></span><br><span class="line">  bound = <span class="function"><span class="keyword">function</span> (<span class="params">...selfArgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> self.apply(</span><br><span class="line">      <span class="comment">// this instanceof nop, åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ new æ¥è°ƒç”¨ bound</span></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯ new æ¥è°ƒç”¨çš„è¯ï¼Œthisçš„æŒ‡å‘å°±æ˜¯å…¶å®ä¾‹ï¼Œ</span></span><br><span class="line">      <span class="comment">// å¦‚æœä¸æ˜¯ new è°ƒç”¨çš„è¯ï¼Œå°±æ”¹å˜ this æŒ‡å‘åˆ°æŒ‡å®šçš„å¯¹è±¡ o</span></span><br><span class="line">      <span class="built_in">this</span> <span class="keyword">instanceof</span> nop ? <span class="built_in">this</span> : thisArg,</span><br><span class="line">      args.concat(selfArgs)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç®­å¤´å‡½æ•°æ²¡æœ‰ prototypeï¼Œç®­å¤´å‡½æ•°thisæ°¸è¿œæŒ‡å‘å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.prototype) &#123;</span><br><span class="line">    nop.prototype = <span class="built_in">this</span>.prototype;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¿®æ”¹ç»‘å®šå‡½æ•°çš„åŸå‹æŒ‡å‘</span></span><br><span class="line">  bound.prototype = <span class="keyword">new</span> nop();</span><br><span class="line">  <span class="keyword">return</span> bound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar.prototype.name = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = &#123;</span><br><span class="line">  name: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bound = bar.mybind(foo, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>);</span><br><span class="line"><span class="keyword">new</span> bound(); <span class="comment">// bar, [22, 33, 44]</span></span><br><span class="line">bound(); <span class="comment">// foo, [22, 33, 44]</span></span><br></pre></td></tr></table></figure><h2 id="Call-amp-Apply"><a href="#Call-amp-Apply" class="headerlink" title="Call &amp; Apply"></a>Call &amp; Apply</h2><h3 id="Call"><a href="#Call" class="headerlink" title="Call"></a>Call</h3><blockquote><p><code>bind</code> æ˜¯å°è£…äº† <code>call</code> çš„æ–¹æ³•æ”¹å˜äº† <code>this</code> çš„æŒ‡å‘å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œé‚£ä¹ˆ <code>call</code> æ˜¯å¦‚ä½•åšåˆ°æ”¹å˜ <code>this</code> çš„æŒ‡å‘å‘¢ï¼ŸåŸç†å¾ˆç®€å•ï¼Œåœ¨æ–¹æ³•è°ƒç”¨æ¨¡å¼ä¸‹ï¼Œ<code>this</code> æ€»æ˜¯æŒ‡å‘è°ƒç”¨å®ƒæ‰€åœ¨æ–¹æ³•çš„å¯¹è±¡ï¼Œ<code>this</code> çš„æŒ‡å‘ä¸æ‰€åœ¨æ–¹æ³•çš„è°ƒç”¨ä½ç½®æœ‰å…³ï¼Œè€Œä¸æ–¹æ³•çš„å£°æ˜ä½ç½®æ— å…³ï¼ˆç®­å¤´å‡½æ•°ç‰¹æ®Šï¼‰ã€‚å…ˆå†™ä¸€ä¸ªå° demo æ¥ç†è§£ä¸€ä¸‹ä¸‹ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123; <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line">foo.fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ this æŒ‡å‘äº† foo</span></span><br><span class="line">  <span class="comment">// å› ä¸º foo è°ƒç”¨äº† fnï¼Œ</span></span><br><span class="line">  <span class="comment">// fn çš„ this å°±æŒ‡å‘äº†è°ƒç”¨å®ƒæ‰€åœ¨æ–¹æ³•çš„å¯¹è±¡ foo ä¸Š</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// foo</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>this</code>çš„è¿™ä¸ªç‰¹æ€§æ¥å®ç°call</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">thisArg = thisArg || <span class="built_in">window</span>;</span><br><span class="line"><span class="comment">// å°†è°ƒç”¨callå‡½æ•°çš„å¯¹è±¡æ·»åŠ åˆ°thisArgçš„å±æ€§ä¸­</span></span><br><span class="line">thisArg.fn = <span class="built_in">this</span>;</span><br><span class="line"><span class="keyword">const</span> result = thisArg.fn(...args);</span><br><span class="line"><span class="keyword">delete</span> thisArg.fn;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Apply"><a href="#Apply" class="headerlink" title="Apply"></a>Apply</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">thisArg</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">thisArg = thisArg || <span class="built_in">window</span>;</span><br><span class="line">thisArg.fn = <span class="built_in">this</span>;</span><br><span class="line"><span class="keyword">const</span> args = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> result = thisArg.fn(...args);</span><br><span class="line"><span class="keyword">delete</span> thisArg.fn;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar.prototype.name = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = &#123;</span><br><span class="line">name: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar.myCall(foo, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// foo [1, 2, 3]</span></span><br><span class="line">bar.myApply(foo, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// foo [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å®Œ~<br><br><br>å‚è€ƒ</p><ul><li><a href="https://mp.weixin.qq.com/s/Qqh1H-2MUyVGoWjgOstQrg">å¹²è´§ï¼é˜¿é‡ŒP6æ‰‹å†™æºç é¢è¯•é¢˜é›†é”¦</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŒºåˆ«&quot;&gt;&lt;a href=&quot;#åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;åŒºåˆ«&quot;&gt;&lt;/a&gt;åŒºåˆ«&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;callã€applyã€bind&lt;/code&gt; æœ¬è´¨éƒ½æ˜¯æ”¹å˜ &lt;code&gt;this&lt;/code&gt; çš„æŒ‡å‘</summary>
      
    
    
    
    
    <category term="js" scheme="https://tauleos.github.io/tags/js/"/>
    
    <category term="æºç " scheme="https://tauleos.github.io/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>jsåŸºç¡€å¤¯å®-å½»åº•ææ‡‚thisçš„æŒ‡å‘é—®é¢˜</title>
    <link href="https://tauleos.github.io/a74d1e8039ab.html"/>
    <id>https://tauleos.github.io/a74d1e8039ab.html</id>
    <published>2019-04-12T01:28:57.000Z</published>
    <updated>2020-10-26T03:16:41.611Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>this å…³é”®å­—æ˜¯ JavaScript ä¸­æœ€å¤æ‚çš„æœºåˆ¶ä¹‹ä¸€ï¼Œæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å…³é”®å­—ï¼Œè¢«è‡ªåŠ¨å®šä¹‰åœ¨æ‰€æœ‰å‡½æ•°çš„ä½œç”¨åŸŸä¸­.</p></blockquote><a id="more"></a><h1 id="ä¸ºä»€ä¹ˆè¦ææ‡‚this"><a href="#ä¸ºä»€ä¹ˆè¦ææ‡‚this" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ææ‡‚this"></a>ä¸ºä»€ä¹ˆè¦ææ‡‚this</h1><ul><li>é¢å‘oopç¼–ç¨‹éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯this</li><li>åœ¨å„ç§functionè°ƒç”¨è¿‡ç¨‹ä¸­å¯ä»¥æ¸…æ™°çš„å¼„æ‡‚ä¸ºä»€ä¹ˆã€‚</li><li>å¯ä»¥æ›´å¥½çš„ç†è§£å¤§å¸ˆä»¬çš„ä»£ç </li><li>é˜²æ­¢é¢è¯•è¢«å’”åš“ã€‚ã€‚ã€‚ï¼ˆè¡€çš„æ•™è®­ï¼‰</li></ul><h1 id="thisæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#thisæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="thisæ˜¯ä»€ä¹ˆï¼Ÿ"></a>thisæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>é¡¾åæ€ä¹‰ï¼Œthiså°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†æ˜¯ä»–å¹¶ä¸æ˜¯æŒ‡å‘è‡ªèº«ï¼<strong>è€Œæ˜¯æŒ‡å‘è°ƒç”¨å‡½æ•°çš„å¯¹è±¡</strong>ã€‚(è¿™å¥è¯å¾ˆé‡è¦ã€‚ä¹Ÿæ˜¯æœ¬ç¯‡æ–‡ç« è´¯ç©¿å§‹ç»ˆçš„ä¸»æ—¨ã€‚)</p><h1 id="thisçš„æŒ‡å‘åˆ¤å®šæ ‡å‡†"><a href="#thisçš„æŒ‡å‘åˆ¤å®šæ ‡å‡†" class="headerlink" title="thisçš„æŒ‡å‘åˆ¤å®šæ ‡å‡†"></a>thisçš„æŒ‡å‘åˆ¤å®šæ ‡å‡†</h1><h4 id="å‰äººçš„åˆ¤å®š"><a href="#å‰äººçš„åˆ¤å®š" class="headerlink" title="å‰äººçš„åˆ¤å®š"></a>å‰äººçš„åˆ¤å®š</h4><ol><li>å‡½æ•°æ˜¯å¦æ˜¯<code>new</code>è°ƒç”¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æŒ‡å‘<code>new</code>åˆ›å»ºçš„å®ä¾‹ã€‚</li><li>å‡½æ•°æ˜¯å¦æ˜¯bindæ–¹æ³•è¿”å›çš„ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™thisæŒ‡å‘æŒ‡å®šå¯¹è±¡ã€‚</li><li>å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡<code>apply/call</code>è°ƒç”¨çš„ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™thisæŒ‡å‘æŒ‡å®šå¯¹è±¡ã€‚</li><li>æ˜¯å¦ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Ÿ å¦‚æœæ˜¯ï¼Œåˆ™thisæŒ‡å‘è¯¥å¯¹è±¡ã€‚</li><li>thisæŒ‡å‘å…¨å±€ã€‚</li></ol><h4 id="ä¸ºä»€ä¹ˆè¿™æ ·åˆ¤å®šï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿™æ ·åˆ¤å®šï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™æ ·åˆ¤å®šï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿™æ ·åˆ¤å®šï¼Ÿ</h4><p>ä¸ºä»€ä¹ˆé€šè¿‡è¿™äº”ç§æ–¹å¼æ¥åˆ¤å®šå‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“thisçš„ç»‘å®šè§„åˆ™æœ‰å“ªäº›ï¼Ÿ</p><ul><li>é»˜è®¤ç»‘å®š</li><li>éšå¼ç»‘å®š</li><li>æ˜¾ç¤ºç»‘å®š</li><li>new ç»‘å®š</li></ul><p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ†åˆ«æŒ¨ä¸ªè¯´æ˜æ¯ä¸ªè§„åˆ™ï¼Œæ¥éªŒè¯æˆ‘ä»¬ä¸Šè¿°çš„åˆ¤å®šæ ‡å‡†ã€‚</p><h2 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h2><p>åœ¨ä¸èƒ½åº”ç”¨å…¶ä»–ç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Hello&#x27;</span>,<span class="built_in">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;mySelf&#x27;</span>;</span><br><span class="line">getName()</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨<code>getName</code>çš„æ—¶å€™,åº”ç”¨äº†é»˜è®¤ç»‘å®šï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡,ä¸¥æ ¼æ¨¡å¼ä¸‹<code>this</code>æ˜¯<code>undefined</code>,</p><ul><li>åœ¨æµè§ˆå™¨æ¨¡å¼ä¸‹<code>this</code>æŒ‡å‘äº†å…¨å±€å¯¹è±¡<code>window</code>,æ‰€ä»¥è¿è¡Œç»“æœæ˜¯<code>HellomySelf</code></li><li>åœ¨nodeç¯å¢ƒä¸‹<code>this</code>æŒ‡å‘çš„å…¨å±€å¯¹è±¡æ˜¯<code>node-runtime</code></li></ul><blockquote><p>åœ¨è¯¥æ–‡ç« ä¸­æˆ‘ä»¬ä¸»è¦è®¨è®ºæµè§ˆå™¨ä¸­çš„è¡¨ç°ã€‚</p></blockquote><h2 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h2><p>å‡½æ•°çš„è°ƒç”¨å­˜åœ¨ä¸Šä¸‹æ–‡å…³ç³»,å…¸å‹æ¡ˆä¾‹å¦‚abc.foo():</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    tag: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    func: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">obj.func();</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœæ˜¯<code>a</code>ï¼›é‚£å¦‚æœæˆ‘æŠŠsayHiçš„å®šä¹‰æå‡åˆ°å¤–è¾¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    tag: <span class="string">&#x27;obj&#x27;</span>,</span><br><span class="line">    func: h</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;window&#x27;</span>;</span><br><span class="line">obj.func();</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœè·Ÿä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨å‡½æ•°<code>sayHi</code>è°ƒç”¨çš„æ—¶å€™,æ­¤æ—¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡å±äº<code>person</code>,<strong>éšå¼ç»‘å®šä¼šå°†å‡½æ•°ä¸­çš„<code>this</code>ç»‘å®šåˆ°<code>person</code>è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸Š</strong></p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨åµŒå¥—å¯¹è±¡çš„è°ƒç”¨æ—¶ï¼Œåªæœ‰ç¦»<code>this</code>æœ€è¿‘çš„é‚£ä¸€å±‚ä¼šå½±å“åˆ°è°ƒç”¨ä½ç½®ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    tag: <span class="string">&#x27;obj1&#x27;</span>,</span><br><span class="line">    func: h</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  tag:<span class="string">&#x27;obj2&#x27;</span>,</span><br><span class="line">  obj:obj1</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;window&#x27;</span>;</span><br><span class="line">obj2.obj.func();</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯<code>obj1</code>,è¿™æ˜¯å› ä¸ºåªæœ‰æ‰§è¡Œåˆ°<code>obj1.func</code>çš„æ—¶å€™ï¼Œæ‰èƒ½ç¡®å®šå‡½æ•°<code>h</code>ä¸­<code>this</code>æŒ‡å‘çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸º<code>obj1</code>.</p><div class="tip">    éšå¼ç»‘å®šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å‘ï¼Œå°±æ˜¯ä¼šä¸¢å¤±ç»‘å®šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä»¥ä¸ºçš„thisæŒ‡å‘ï¼Œå…¶å®å¹¶ä¸æ˜¯thisçœŸæ­£çš„æŒ‡å‘ï¼ˆæˆ‘ä»¬ä»¥ä¸ºä»–æ˜¯é›·é”‹ï¼Œä½†æ˜¯ä»–å´æ˜¯é›·å³°å¡”ï¼‰</div><p>éšå¼ç»‘å®šçš„ä¸¢å¤±ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢:</p><ol><li><p>å‡½æ•°é‡æ–°èµ‹å€¼,å¦‚ä¸‹é¢ä»£ç æ‰€ç¤º:</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  tag:<span class="string">&#x27;obj1&#x27;</span>,</span><br><span class="line">  func:h</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;window&#x27;</span></span><br><span class="line"><span class="keyword">var</span> callh = obj1.func;</span><br><span class="line">callh(); <span class="comment">//window</span></span><br></pre></td></tr></table></figure><p><strong>è¿™æ˜¯å› ä¸º<code>callh</code>ç›´æ¥æŒ‡å‘äº†å‡½æ•°<code>h</code>çš„å¼•ç”¨ï¼Œåœ¨æ‰§è¡Œ<code>callh</code>çš„æ—¶å€™ä¸Šä¸‹æ–‡å¯¹è±¡ä¸º<code>document.window</code></strong></p></li><li><p>åœ¨å›æ‰å‡½æ•°å’Œäº‹ä»¶å›è°ƒä¸­ä¹Ÿä¼šä¸¢å¤±ç»‘å®š,å¦‚ä¸‹ä»£ç æ‰€ç¤º</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  tag:<span class="string">&#x27;obj1&#x27;</span>,</span><br><span class="line">  func:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  tag:<span class="string">&#x27;obj2&#x27;</span>,</span><br><span class="line">  func:h</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;window&#x27;</span></span><br><span class="line">obj1.func(); <span class="comment">// window</span></span><br><span class="line"><span class="built_in">setTimeout</span>(obj2.func,<span class="number">200</span>); <span class="comment">// window</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  obj2.func()</span><br><span class="line">&#125;,<span class="number">200</span>)           <span class="comment">//obj2</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªè¾“å‡ºæ˜¯å› ä¸ºå‘½ä¸­äº†é»˜è®¤ç»‘å®š,<code>this</code>æŒ‡å‘äº†<code>document.window</code></li><li>ç¬¬äºŒä¸ªè¾“å‡ºæ˜¯å› ä¸º<code>obj2.func</code>èµ‹å€¼ç»™äº†<code>setTimeout</code>çš„å›è°ƒå…¥å‚ä¹‹ååˆæ‰§è¡Œè¿™ä¸ªå…¥å‚ï¼Œæ‰€ä»¥éšå¼ç»‘å®šä¸¢å¤±ï¼Œ<code>this</code>æŒ‡å‘äº†<code>document.window</code></li><li>ç¬¬ä¸‰æ¡è¾“å‡ºæ˜¯å› ä¸ºå‘½ä¸­äº†éšå¼ç»‘å®šï¼Œ<code>this</code>æŒ‡å‘äº†<code>obj2</code></li></ul></li></ol><h2 id="æ˜¾å¼ç»‘å®š"><a href="#æ˜¾å¼ç»‘å®š" class="headerlink" title="æ˜¾å¼ç»‘å®š"></a>æ˜¾å¼ç»‘å®š</h2><p>é€šè¿‡ <code>call,apply,bind</code> çš„æ–¹å¼ï¼Œæ˜¾å¼çš„æŒ‡å®š<code>this</code>æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚<code>call,apply,bind</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯å¯¹åº”å‡½æ•°çš„<code>this</code>æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚<code>call</code>å’Œ<code>apply</code>çš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ å‚æ–¹å¼ä¸åŒã€‚<code>call</code>å’Œ<code>apply</code>éƒ½ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œè€Œ<code>bind</code>æ–¹æ³•ä¸ä¼šã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.tag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    tag: <span class="string">&#x27;obj1&#x27;</span>,</span><br><span class="line">    func: h</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tag = <span class="string">&#x27;window&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> h2 = <span class="function"><span class="keyword">function</span>(<span class="params">func</span>)</span>&#123;</span><br><span class="line">  func()</span><br><span class="line">&#125;</span><br><span class="line">h2.call(obj1,obj1.func)   <span class="comment">//window</span></span><br></pre></td></tr></table></figure><p><strong>å› ä¸º<code>obj1.func</code>ä½œä¸ºå…¥å‚ä¼ å…¥çš„æ—¶å€™,å·²ç»ä¸¢å¤±äº†éšå¼ç»‘å®šçš„<code>this</code></strong></p><h2 id="newå…³é”®å­—ç»‘å®š"><a href="#newå…³é”®å­—ç»‘å®š" class="headerlink" title="newå…³é”®å­—ç»‘å®š"></a><code>new</code>å…³é”®å­—ç»‘å®š</h2><p>ä½¿ç”¨<code>new</code>æ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li><li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹å€¼ç»™æ–°å¯¹è±¡ï¼Œå³<code>this</code>æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li><li>è¿”å›æ–°å¯¹è±¡</li></ol><h1 id="ç»‘å®šä¼˜å…ˆçº§"><a href="#ç»‘å®šä¼˜å…ˆçº§" class="headerlink" title="ç»‘å®šä¼˜å…ˆçº§"></a>ç»‘å®šä¼˜å…ˆçº§</h1><blockquote><p>new ç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p></blockquote><h1 id="ç»‘å®šä¾‹å¤–"><a href="#ç»‘å®šä¾‹å¤–" class="headerlink" title="ç»‘å®šä¾‹å¤–"></a>ç»‘å®šä¾‹å¤–</h1><p>å¦‚æœæˆ‘ä»¬å°†<code>null</code>æˆ–è€…æ˜¯<code>undefined</code>ä½œä¸º<code>this</code>çš„ç»‘å®šå¯¹è±¡ä¼ å…¥<code>callã€applyã€bind</code>, è¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚</p><h1 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h1><p>ç®­å¤´å‡½æ•°æ˜¯ ES6 ä¸­æ–°å¢çš„ï¼Œå®ƒå’Œæ™®é€šå‡½æ•°æœ‰ä¸€äº›åŒºåˆ«ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œå®ƒçš„ this ç»§æ‰¿äºå¤–å±‚ä»£ç åº“ä¸­çš„ thisã€‚ç®­å¤´å‡½æ•°åœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹:</p><ul><li>å‡½æ•°ä½“å†…çš„ this å¯¹è±¡ï¼Œç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„ thisã€‚</li><li>ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨ new å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li><li>ä¸å¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚</li><li>ä¸å¯ä»¥ä½¿ç”¨ yield å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚</li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ call()ã€apply()ã€bind() è¿™äº›æ–¹æ³•å»æ”¹å˜ this çš„æŒ‡å‘.</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>1 . å‡½æ•°æ˜¯å¦åœ¨ new ä¸­è°ƒç”¨ (new ç»‘å®š)ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆ this ç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚<br>2 . å‡½æ•°æ˜¯å¦é€šè¿‡ call,apply è°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨äº† bind(å³ç¡¬ç»‘å®š)ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆ this ç»‘å®šçš„å°±æ˜¯æŒ‡å®šçš„å¯¹è±¡ã€‚<br>3 . å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨ (éšå¼ç»‘å®š)ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œthis ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ä¸€èˆ¬æ˜¯ obj.foo()ã€‚<br>4 . å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ç»‘å®šåˆ° undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚<br>5 . å¦‚æœæŠŠ Null æˆ–è€… undefined ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ callã€apply æˆ–è€… bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚<br>6 . å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„ this ç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„ thisã€‚</p><p>å‚è€ƒ</p><ul><li><a href="https://juejin.im/post/5c96d0c751882511c832ff7b">å—¨ï¼Œä½ çœŸçš„æ‡‚thiså—ï¼Ÿ</a></li><li><a href="http://www.ruanyifeng.com/blog/2010/04/using_this_keyword_in_javascript.html">Javascript çš„ this ç”¨æ³•</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;this å…³é”®å­—æ˜¯ JavaScript ä¸­æœ€å¤æ‚çš„æœºåˆ¶ä¹‹ä¸€ï¼Œæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å…³é”®å­—ï¼Œè¢«è‡ªåŠ¨å®šä¹‰åœ¨æ‰€æœ‰å‡½æ•°çš„ä½œç”¨åŸŸä¸­.&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="js" scheme="https://tauleos.github.io/tags/js/"/>
    
    <category term="ç†è®º" scheme="https://tauleos.github.io/tags/%E7%90%86%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>mac-v10.9.5å®‰è£…nginx</title>
    <link href="https://tauleos.github.io/abff08f12a22.html"/>
    <id>https://tauleos.github.io/abff08f12a22.html</id>
    <published>2019-03-25T11:04:45.000Z</published>
    <updated>2019-05-07T06:09:01.000Z</updated>
    
    
    
    
    
    <category term="mac" scheme="https://tauleos.github.io/tags/mac/"/>
    
    <category term="nginx" scheme="https://tauleos.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£…redis</title>
    <link href="https://tauleos.github.io/5d3c72d7cf56.html"/>
    <id>https://tauleos.github.io/5d3c72d7cf56.html</id>
    <published>2019-03-24T16:00:00.000Z</published>
    <updated>2020-10-15T06:18:44.771Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…redis"><a href="#å®‰è£…redis" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wget http://redis.googlecode.com/files/redis-2.6.14.tar.gz</span><br><span class="line">tar -zxvf redis-2.6.14.tar.gz</span><br><span class="line"><span class="built_in">cd</span> redis-2.6.14</span><br><span class="line">make</span><br><span class="line">make PREFIX=/usr/<span class="built_in">local</span>/redis install</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="è®¾ç½®redisè‡ªå¯åŠ¨"><a href="#è®¾ç½®redisè‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®redisè‡ªå¯åŠ¨"></a>è®¾ç½®redisè‡ªå¯åŠ¨</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/<span class="built_in">local</span>/redis/&#123;etc,var&#125;</span><br><span class="line">cp redis.conf /usr/<span class="built_in">local</span>/redis/etc/</span><br></pre></td></tr></table></figure><h3 id="æ”¹é…ç½®"><a href="#æ”¹é…ç½®" class="headerlink" title="æ”¹é…ç½®"></a>æ”¹é…ç½®</h3><figure class="highlight zsh"><table><tr><td class="code"><pre><span class="line">nano /etc/rc.local</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æœ€åä¸€è¡ŒåŠ å…¥</p></blockquote><figure class="highlight console"><table><tr><td class="code"><pre><span class="line">./usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf</span><br><span class="line">nano /usr/local/redis/etc/redis.conf #ä¿®æ”¹redis-confé…ç½®æ–‡ä»¶</span><br><span class="line">port 10087 #è®¾ç½®ç«¯å£ä¸º10087</span><br><span class="line">requirepass ehncf2000  #è®¾ç½®è®¿é—®å¯†ç </span><br><span class="line">daemonize yes #ä¿®æ”¹åå°è¿è¡Œ</span><br><span class="line">timeout 300   #è¯·æ±‚è¶…æ—¶æ—¶é—´</span><br><span class="line">loglevel debug #logä¿¡æ¯çº§åˆ«</span><br><span class="line">dbfilename dump.rdb #æ•°æ®æ–‡ä»¶</span><br><span class="line">dir /usr/local/redis/etc/ #æ•°æ®æ–‡ä»¶ç›®å½•</span><br></pre></td></tr></table></figure><h3 id="åŠ ç¯å¢ƒå˜é‡"><a href="#åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="åŠ ç¯å¢ƒå˜é‡"></a>åŠ ç¯å¢ƒå˜é‡</h3><figure class="highlight console"><table><tr><td class="code"><pre><span class="line">nano /etc/environment</span><br><span class="line">/usr/local/redis/bin/redis-server</span><br><span class="line">/usr/local/redis/bin/redis-benchmark</span><br><span class="line">/usr/local/redis/bin/redis-cli</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨redis"><a href="#å¯åŠ¨redis" class="headerlink" title="å¯åŠ¨redis"></a>å¯åŠ¨redis</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å®‰è£…redis&quot;&gt;&lt;a href=&quot;#å®‰è£…redis&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…redis&quot;&gt;&lt;/a&gt;å®‰è£…redis&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget http://redis.googlecode.com/files/redis-2.6.14.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf redis-2.6.14.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; redis-2.6.14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make PREFIX=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/redis install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="linux" scheme="https://tauleos.github.io/tags/linux/"/>
    
    <category term="redis" scheme="https://tauleos.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>kafkaå®‰è£…æ•™ç¨‹</title>
    <link href="https://tauleos.github.io/9151c631d8a6.html"/>
    <id>https://tauleos.github.io/9151c631d8a6.html</id>
    <published>2019-01-25T11:09:48.000Z</published>
    <updated>2020-10-19T09:57:16.215Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Kafkaæ˜¯æœ€åˆç”±Linkedinå…¬å¸å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€åˆ†åŒºçš„ã€å¤šå‰¯æœ¬çš„ã€å¤šè®¢é˜…è€…ï¼ŒåŸºäºzookeeperåè°ƒçš„åˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿï¼ˆä¹Ÿå¯ä»¥å½“åšMQç³»ç»Ÿï¼‰ï¼Œå¸¸è§å¯ä»¥ç”¨äºweb/nginxæ—¥å¿—ã€è®¿é—®æ—¥å¿—ï¼Œæ¶ˆæ¯æœåŠ¡ç­‰ç­‰ï¼ŒLinkedinäº2010å¹´è´¡çŒ®ç»™äº†ApacheåŸºé‡‘ä¼šå¹¶æˆä¸ºé¡¶çº§å¼€æºé¡¹ç›®ã€‚<br><br><br>å…¶ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯ï¼šæ—¥å¿—æ”¶é›†ç³»ç»Ÿå’Œæ¶ˆæ¯ç³»ç»Ÿã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="1ã€å®‰è£…JDK-1-8-0"><a href="#1ã€å®‰è£…JDK-1-8-0" class="headerlink" title="1ã€å®‰è£…JDK 1.8.0"></a>1ã€å®‰è£…JDK 1.8.0</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">rpm -jvh jdk-8u101-linux-x64.rpm</span><br><span class="line"><span class="comment">#éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">java -version</span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># java version &quot;1.8.0_101&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€å®‰è£…zookeeper"><a href="#2ã€å®‰è£…zookeeper" class="headerlink" title="2ã€å®‰è£…zookeeper"></a>2ã€å®‰è£…zookeeper</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tar -zxvf zookeeper-3.4.8.tar.gz</span><br><span class="line"><span class="built_in">cd</span> zookeeper-3.4.8/conf</span><br><span class="line">mv zoo_sample.cfg zoo.cfg</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">./bin/zkServer.sh start</span><br><span class="line"><span class="comment"># å¼€å¯åå¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤æ£€æµ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ</span></span><br><span class="line">ps aux |grep zookeeper</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3ã€å®‰è£…kafka"><a href="#3ã€å®‰è£…kafka" class="headerlink" title="3ã€å®‰è£…kafka"></a>3ã€å®‰è£…kafka</h3><h4 id="1ã€è¿è¡Œkafka"><a href="#1ã€è¿è¡Œkafka" class="headerlink" title="1ã€è¿è¡Œkafka"></a>1ã€è¿è¡Œkafka</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tar -zxvf kafka.tgz</span><br><span class="line"><span class="built_in">cd</span> /opt/kafka/bin</span><br><span class="line">nohup ./kafka-server-start.sh /opt/kafka/config/server.properties &amp;</span><br></pre></td></tr></table></figure><h4 id="2ã€åˆ›å»ºtopic"><a href="#2ã€åˆ›å»ºtopic" class="headerlink" title="2ã€åˆ›å»ºtopic"></a>2ã€åˆ›å»ºtopic</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic data-test</span><br><span class="line"><span class="comment"># åˆ›å»ºæˆåŠŸæ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š</span></span><br><span class="line"><span class="comment"># Created topic &quot;data-test&quot;.</span></span><br><span class="line"><span class="built_in">cd</span> bin/</span><br><span class="line"><span class="comment"># æŸ¥çœ‹topicåˆ—è¡¨</span></span><br><span class="line">./kafka-topics.sh --list --zookeeper localhost:2181</span><br></pre></td></tr></table></figure><h3 id="4ã€æµ‹è¯•"><a href="#4ã€æµ‹è¯•" class="headerlink" title="4ã€æµ‹è¯•"></a>4ã€æµ‹è¯•</h3><h4 id="ç”Ÿäº§æ¶ˆæ¯"><a href="#ç”Ÿäº§æ¶ˆæ¯" class="headerlink" title="ç”Ÿäº§æ¶ˆæ¯"></a>ç”Ÿäº§æ¶ˆæ¯</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="built_in">test</span> Kafka <span class="built_in">test</span>!    </span><br><span class="line"><span class="comment"># è¿™é‡Œçš„â€œKafka test!â€ä¸ºæ‰‹åŠ¨è¾“å…¥çš„ï¼Œè¾“å…¥åâ€œctrl +câ€é€€å‡ºï¼›</span></span><br></pre></td></tr></table></figure><h4 id="æ¶ˆè´¹æ¶ˆæ¯"><a href="#æ¶ˆè´¹æ¶ˆæ¯" class="headerlink" title="æ¶ˆè´¹æ¶ˆæ¯"></a>æ¶ˆè´¹æ¶ˆæ¯</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./kafka-console-consumer.sh --zookeeper localhost:2181 --topic <span class="built_in">test</span> --from-beginning I<span class="string">&#x27;m laoyang  </span></span><br><span class="line"><span class="string"># ä¹‹å‰æµ‹è¯•è¾“å…¥çš„å†…å®¹ kafka test!</span></span><br></pre></td></tr></table></figure><br><p>å®Œ~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h2&gt;&lt;p&gt;Kafkaæ˜¯æœ€åˆç”±Linkedinå…¬å¸å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€åˆ†åŒºçš„ã€å¤šå‰¯æœ¬çš„ã€å¤šè®¢é˜…è€…ï¼ŒåŸºäºzookeeperåè°ƒçš„åˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿï¼ˆä¹Ÿå¯ä»¥å½“åš</summary>
      
    
    
    
    
    <category term="linux" scheme="https://tauleos.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æ¯æ—¥ä¸€æ¡linuxå‘½ä»¤ä¹‹ln</title>
    <link href="https://tauleos.github.io/c60b11b049f3.html"/>
    <id>https://tauleos.github.io/c60b11b049f3.html</id>
    <published>2018-08-04T08:43:17.000Z</published>
    <updated>2019-05-07T06:07:25.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>lnæ˜¯linuxä¸­åˆä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥.å½“æˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç›®å½•ï¼Œç”¨åˆ°ç›¸åŒçš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªéœ€è¦çš„ç›®å½•ä¸‹éƒ½æ”¾ä¸€ä¸ªå¿…é¡»ç›¸åŒçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦åœ¨æŸä¸ªå›ºå®šçš„ç›®å½•ï¼Œæ”¾ä¸Šè¯¥æ–‡ä»¶ï¼Œç„¶ååœ¨ å…¶å®ƒçš„ç›®å½•ä¸‹ç”¨lnå‘½ä»¤é“¾æ¥ï¼ˆlinkï¼‰å®ƒå°±å¯ä»¥ï¼Œä¸å¿…é‡å¤çš„å ç”¨ç£ç›˜ç©ºé—´ã€‚</p><a id="more"></a><h3 id="å‘½ä»¤æ ¼å¼"><a href="#å‘½ä»¤æ ¼å¼" class="headerlink" title="å‘½ä»¤æ ¼å¼"></a>å‘½ä»¤æ ¼å¼</h3><blockquote><p>ln [å‚æ•°][æºæ–‡ä»¶æˆ–ç›®å½•][ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]</p></blockquote><h3 id="å‘½ä»¤åŠŸèƒ½"><a href="#å‘½ä»¤åŠŸèƒ½" class="headerlink" title="å‘½ä»¤åŠŸèƒ½"></a>å‘½ä»¤åŠŸèƒ½</h3><p>Linuxæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰æ‰€è°“çš„é“¾æ¥(link)ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºæ¡£æ¡ˆçš„åˆ«åï¼Œè€Œé“¾æ¥åˆå¯åˆ†ä¸ºä¸¤ç§ : ç¡¬é“¾æ¥(hard link)ä¸è½¯é“¾æ¥(symbolic link)ï¼Œç¡¬é“¾æ¥çš„æ„æ€æ˜¯ä¸€ä¸ªæ¡£æ¡ˆå¯ä»¥æœ‰å¤šä¸ªåç§°ï¼Œè€Œè½¯é“¾æ¥çš„æ–¹å¼åˆ™æ˜¯äº§ç”Ÿä¸€ä¸ªç‰¹æ®Šçš„æ¡£æ¡ˆï¼Œè¯¥æ¡£æ¡ˆçš„å†…å®¹æ˜¯æŒ‡å‘å¦ä¸€ä¸ªæ¡£æ¡ˆçš„ä½ç½®ã€‚ç¡¬é“¾æ¥æ˜¯å­˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œè½¯é“¾æ¥å´å¯ä»¥è·¨è¶Šä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><h4 id="è½¯é“¾æ¥"><a href="#è½¯é“¾æ¥" class="headerlink" title="è½¯é“¾æ¥"></a>è½¯é“¾æ¥</h4><ul><li>è½¯é“¾æ¥ï¼Œä»¥è·¯å¾„çš„å½¢å¼å­˜åœ¨ã€‚ç±»ä¼¼äºWindowsæ“ä½œç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼</li><li>è½¯é“¾æ¥å¯ä»¥ è·¨æ–‡ä»¶ç³»ç»Ÿ ï¼Œç¡¬é“¾æ¥ä¸å¯ä»¥</li><li>è½¯é“¾æ¥å¯ä»¥å¯¹ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶åè¿›è¡Œé“¾æ¥</li><li>è½¯é“¾æ¥å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé“¾æ¥</li></ul><h4 id="ç¡¬é“¾æ¥"><a href="#ç¡¬é“¾æ¥" class="headerlink" title="ç¡¬é“¾æ¥"></a>ç¡¬é“¾æ¥</h4><ul><li>ç¡¬é“¾æ¥ï¼Œä»¥æ–‡ä»¶å‰¯æœ¬çš„å½¢å¼å­˜åœ¨ã€‚ä½†ä¸å ç”¨å®é™…ç©ºé—´</li><li>ä¸å…è®¸ç»™ç›®å½•åˆ›å»ºç¡¬é“¾æ¥</li><li>ç¡¬é“¾æ¥åªæœ‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ‰èƒ½åˆ›å»º</li></ul><p><strong>è¿™é‡Œæœ‰ä¸¤ç‚¹è¦æ³¨æ„ï¼š</strong></p><ul><li>lnå‘½ä»¤ä¼šä¿æŒæ¯ä¸€å¤„é“¾æ¥æ–‡ä»¶çš„åŒæ­¥æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è®ºä½ æ”¹åŠ¨äº†å“ªä¸€å¤„ï¼Œå…¶å®ƒçš„æ–‡ä»¶éƒ½ä¼šå‘ç”Ÿç›¸åŒçš„å˜åŒ–</li><li>lnçš„é“¾æ¥åˆåˆ†è½¯é“¾æ¥å’Œç¡¬é“¾æ¥ä¸¤ç§ï¼Œè½¯é“¾æ¥å°±æ˜¯ln â€“s æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ï¼Œå®ƒåªä¼šåœ¨ä½ é€‰å®šçš„ä½ç½®ä¸Šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶çš„é•œåƒï¼Œä¸ä¼šå ç”¨ç£ç›˜ç©ºé—´ï¼Œç¡¬é“¾æ¥ ln æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ï¼Œæ²¡æœ‰å‚æ•°-sï¼Œ å®ƒä¼šåœ¨ä½ é€‰å®šçš„ä½ç½®ä¸Šç”Ÿæˆä¸€ä¸ªå’Œæºæ–‡ä»¶å¤§å°ç›¸åŒçš„æ–‡ä»¶ï¼Œæ— è®ºæ˜¯è½¯é“¾æ¥è¿˜æ˜¯ç¡¬é“¾æ¥ï¼Œæ–‡ä»¶éƒ½ä¿æŒåŒæ­¥å˜åŒ–ã€‚</li></ul><p>lnæŒ‡ä»¤ç”¨åœ¨é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚åŒæ—¶æŒ‡å®šä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸”æœ€åçš„ç›®çš„åœ°æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç›®å½•ï¼Œåˆ™ä¼šæŠŠå‰é¢æŒ‡å®šçš„æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸­ã€‚è‹¥åŒæ—¶æŒ‡å®šå¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸”æœ€åçš„ç›®çš„åœ°å¹¶éæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯ã€‚</p><h3 id="å‘½ä»¤å‚æ•°"><a href="#å‘½ä»¤å‚æ•°" class="headerlink" title="å‘½ä»¤å‚æ•°"></a>å‘½ä»¤å‚æ•°</h3><p>å¿…è¦å‚æ•°:</p><p>-b åˆ é™¤ï¼Œè¦†ç›–ä»¥å‰å»ºç«‹çš„é“¾æ¥</p><p>-d å…è®¸è¶…çº§ç”¨æˆ·åˆ¶ä½œç›®å½•çš„ç¡¬é“¾æ¥</p><p>-f å¼ºåˆ¶æ‰§è¡Œ</p><p>-i äº¤äº’æ¨¡å¼ï¼Œæ–‡ä»¶å­˜åœ¨åˆ™æç¤ºç”¨æˆ·æ˜¯å¦è¦†ç›–</p><p>-n æŠŠç¬¦å·é“¾æ¥è§†ä¸ºä¸€èˆ¬ç›®å½•</p><p>-s è½¯é“¾æ¥(ç¬¦å·é“¾æ¥)</p><p>-v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†è¿‡ç¨‹</p><p>é€‰æ‹©å‚æ•°:</p><p>-S â€œ-S&lt;å­—å°¾å¤‡ä»½å­—ç¬¦ä¸²&gt; â€æˆ– â€œâ€“suffix=&lt;å­—å°¾å¤‡ä»½å­—ç¬¦ä¸²&gt;â€</p><p>-V â€œ-V&lt;å¤‡ä»½æ–¹å¼&gt;â€æˆ–â€œâ€“version-control=&lt;å¤‡ä»½æ–¹å¼&gt;â€</p><p>â€“help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</p><p>â€“version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;lnæ˜¯linuxä¸­åˆä¸€ä¸ªéå¸¸é‡è¦å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥.å½“æˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç›®å½•ï¼Œç”¨åˆ°ç›¸åŒçš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªéœ€è¦çš„ç›®å½•ä¸‹éƒ½æ”¾ä¸€ä¸ªå¿…é¡»ç›¸åŒçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦åœ¨æŸä¸ªå›ºå®šçš„ç›®å½•ï¼Œæ”¾ä¸Šè¯¥æ–‡ä»¶ï¼Œç„¶ååœ¨ å…¶å®ƒçš„ç›®å½•ä¸‹ç”¨lnå‘½ä»¤é“¾æ¥ï¼ˆlinkï¼‰å®ƒå°±å¯ä»¥ï¼Œä¸å¿…é‡å¤çš„å ç”¨ç£ç›˜ç©ºé—´ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="linux" scheme="https://tauleos.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>php mysqlæ‰¹é‡æ’å…¥</title>
    <link href="https://tauleos.github.io/6e9c090d6e03.html"/>
    <id>https://tauleos.github.io/6e9c090d6e03.html</id>
    <published>2017-10-01T14:37:41.000Z</published>
    <updated>2020-10-19T09:31:55.100Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Insert-Intoï¼š"><a href="#ä¸€ã€Insert-Intoï¼š" class="headerlink" title="ä¸€ã€Insert Intoï¼š"></a>ä¸€ã€Insert Intoï¼š</h2><blockquote><p>ä½¿ç”¨<code>insert into</code> æ’å…¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$params = <span class="keyword">array</span>(â€˜valueâ€™=&gt;â€™<span class="number">50</span>â€²);</span><br><span class="line">set_time_limit(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> date(â€œH:i:sâ€);</span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;<span class="number">2000000</span>;$i++)&#123;</span><br><span class="line">  $connect_mysql-&gt;insert($params);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">echo</span> date(â€œH:i:sâ€); </span><br></pre></td></tr></table></figure><div class="tip">æœ€åæ˜¾ç¤ºä¸ºï¼š**23:25:05 01:32:05**, ã€‚ã€‚ã€‚ã€‚ã€‚ ä¹Ÿå°±æ˜¯èŠ±äº†2ä¸ªå°æ—¶å¤š! ğŸ˜¢</div><h2 id="äºŒã€äº‹åŠ¡"><a href="#äºŒã€äº‹åŠ¡" class="headerlink" title="äºŒã€äº‹åŠ¡"></a>äºŒã€äº‹åŠ¡</h2><blockquote><p>ä½¿ç”¨äº‹åŠ¡æäº¤ï¼Œæ‰¹é‡æ’å…¥æ•°æ®åº“(æ¯éš”10Wæ¡æäº¤ä¸‹),ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> date(â€œH:i:sâ€); </span><br><span class="line">$connect_mysql-&gt;query(â€˜BEGINâ€™);</span><br><span class="line">$params = <span class="keyword">array</span>(â€˜valueâ€™=&gt;â€™<span class="number">50</span>â€²);</span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;<span class="number">2000000</span>;$i++)&#123;</span><br><span class="line">  $connect_mysql-&gt;insert($params);</span><br><span class="line">  <span class="keyword">if</span>($i%<span class="number">100000</span>==<span class="number">0</span>)&#123;</span><br><span class="line">    $connect_mysql-&gt;query(â€˜COMMITâ€™);$connect_mysql-&gt;query(â€˜BEGINâ€™);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">$connect_mysql-&gt;query(â€˜COMMITâ€™);</span><br><span class="line"><span class="keyword">echo</span> date(â€œH:i:sâ€); </span><br></pre></td></tr></table></figure><div class="tip">æœ€åæ˜¾ç¤ºæ¶ˆè€—çš„æ—¶é—´ä¸ºï¼š**22:56:13 23:04:00**ï¼Œä¸€å…±8åˆ†13ç§’.å¥½åƒå¿«äº†ä¸å°‘ã€‚ã€‚</div><h2 id="ä¸‰ã€ä¼˜åŒ–SQLè¯­å¥"><a href="#ä¸‰ã€ä¼˜åŒ–SQLè¯­å¥" class="headerlink" title="ä¸‰ã€ä¼˜åŒ–SQLè¯­å¥"></a>ä¸‰ã€ä¼˜åŒ–SQLè¯­å¥</h2><blockquote><p>ä½¿ç”¨ä¼˜åŒ–SQLè¯­å¥ï¼šå°†SQLè¯­å¥è¿›è¡Œæ‹¼æ¥ï¼Œä½¿ç”¨ <code>insert into table () values  (),(),(),()</code>ç„¶åå†ä¸€æ¬¡æ€§æ’å…¥ï¼Œ</p><blockquote><p>å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œåˆ™éœ€è¦é…ç½®ä¸‹MYSQLï¼Œåœ¨mysql å‘½ä»¤è¡Œä¸­è¿è¡Œ ï¼š</p></blockquote></blockquote><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> global max_allowed_packet =  2*1024*1024*10;</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$sql= â€œinsert into twenty_million (value) valuesâ€; <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;<span class="number">2000000</span>;$i++)&#123; </span><br><span class="line">  $sql.=â€(â€™<span class="number">50</span>â€²),â€; </span><br><span class="line">&#125;; </span><br><span class="line">$sql = substr($sql,<span class="number">0</span>,strlen($sql)<span class="number">-1</span>); $connect_mysql-&gt;query($sql); </span><br></pre></td></tr></table></figure><div class="tip">æ¶ˆè€—æ—¶é—´ä¸ºï¼š11:24:06 11:25:06;æ’å…¥200Wæ¡æµ‹è¯•æ•°æ®ä»…ä»…ç”¨äº†1åˆ†é’Ÿ!</div><h2 id="å››ã€ç»“è®º"><a href="#å››ã€ç»“è®º" class="headerlink" title="å››ã€ç»“è®º"></a>å››ã€ç»“è®º</h2><p>åœ¨æ’å…¥å¤§æ‰¹é‡æ•°æ®æ—¶ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ— ç–‘æ˜¯æœ€å·®åŠ²çš„ï¼Œè€Œç¬¬äºŒç§æ–¹æ³•åœ¨å®é™…åº”ç”¨ä¸­å°±æ¯”è¾ƒå¹¿æ³›ï¼Œç¬¬ä¸‰ç§æ–¹æ³•åœ¨æ’å…¥æµ‹è¯•æ•°æ®æˆ–è€…å…¶ä»–ä½è¦æ±‚æ—¶æ¯”è¾ƒåˆé€‚ï¼Œé€Ÿåº¦ç¡®å®å¿«ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€Insert-Intoï¼š&quot;&gt;&lt;a href=&quot;#ä¸€ã€Insert-Intoï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Insert Intoï¼š&quot;&gt;&lt;/a&gt;ä¸€ã€Insert Intoï¼š&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;i</summary>
      
    
    
    
    
    <category term="php" scheme="https://tauleos.github.io/tags/php/"/>
    
    <category term="mysql" scheme="https://tauleos.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤è¡Œå¤‡ä»½æ•°æ®åº“</title>
    <link href="https://tauleos.github.io/11263d42178f.html"/>
    <id>https://tauleos.github.io/11263d42178f.html</id>
    <published>2017-10-01T14:37:41.000Z</published>
    <updated>2019-05-07T06:09:41.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š"><a href="#ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š" class="headerlink" title="ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š"></a>ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š</h1><blockquote><p>è¯¥Shellè„šæœ¬å¯ä»¥è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“ã€‚åªè¦å¤åˆ¶ç²˜è´´æœ¬è„šæœ¬åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œè¾“å…¥æ•°æ®åº“ç”¨æˆ·åã€å¯†ç ä»¥åŠæ•°æ®åº“åå³å¯ã€‚æˆ‘å¤‡ä»½æ•°æ®åº“ä½¿ç”¨çš„æ˜¯mysqlump å‘½ä»¤ã€‚åé¢ä¼šå¯¹æ¯è¡Œè„šæœ¬å‘½ä»¤è¿›è¡Œè¯´æ˜ã€‚</p></blockquote><h2 id="1ã€åˆ†åˆ«å»ºç«‹ç›®å½•â€œbackupâ€å’Œâ€œoldbackupâ€"><a href="#1ã€åˆ†åˆ«å»ºç«‹ç›®å½•â€œbackupâ€å’Œâ€œoldbackupâ€" class="headerlink" title="1ã€åˆ†åˆ«å»ºç«‹ç›®å½•â€œbackupâ€å’Œâ€œoldbackupâ€"></a>1ã€åˆ†åˆ«å»ºç«‹ç›®å½•â€œbackupâ€å’Œâ€œoldbackupâ€</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">mkdir /backup</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">mkdir /oldbackup</span></span><br></pre></td></tr></table></figure><h2 id="2ã€ç°åœ¨ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘è½¯ä»¶åˆ›å»ºå¹¶ç¼–è¾‘-backup-sh"><a href="#2ã€ç°åœ¨ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘è½¯ä»¶åˆ›å»ºå¹¶ç¼–è¾‘-backup-sh" class="headerlink" title="2ã€ç°åœ¨ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘è½¯ä»¶åˆ›å»ºå¹¶ç¼–è¾‘ backup.sh"></a>2ã€ç°åœ¨ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘è½¯ä»¶åˆ›å»ºå¹¶ç¼–è¾‘ backup.sh</h2><blockquote><p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ vi</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi /backup/backup.sh</span></span><br></pre></td></tr></table></figure><h2 id="3ã€-ç°åœ¨æŠŠä»¥ä¸‹å‡ è¡Œå‘½ä»¤è¾“å…¥åˆ°-backup-sh-æ–‡ä»¶ä¸­ï¼š"><a href="#3ã€-ç°åœ¨æŠŠä»¥ä¸‹å‡ è¡Œå‘½ä»¤è¾“å…¥åˆ°-backup-sh-æ–‡ä»¶ä¸­ï¼š" class="headerlink" title="3ã€ ç°åœ¨æŠŠä»¥ä¸‹å‡ è¡Œå‘½ä»¤è¾“å…¥åˆ° backup.sh æ–‡ä»¶ä¸­ï¼š"></a>3ã€ ç°åœ¨æŠŠä»¥ä¸‹å‡ è¡Œå‘½ä»¤è¾“å…¥åˆ° backup.sh æ–‡ä»¶ä¸­ï¼š</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line"></span><br><span class="line">cd /backup</span><br><span class="line"></span><br><span class="line">echo â€œYou are In Backup Directoryâ€</span><br><span class="line"></span><br><span class="line">mv backup* /oldbackup</span><br><span class="line"></span><br><span class="line">echo â€œOld Databases are Moved to oldbackup folderâ€</span><br><span class="line"></span><br><span class="line">Now=$(date +â€%d-%m-%Y--%H:%M:%Sâ€)</span><br><span class="line"></span><br><span class="line">File=backup-$Now.sql</span><br><span class="line"></span><br><span class="line">mysqldump â€“u user-name  â€“p â€˜passwordâ€™ database-name &gt; $File</span><br><span class="line"></span><br><span class="line">echo â€œYour Database Backup Successfully Completedâ€</span><br></pre></td></tr></table></figure><blockquote><p>è„šæœ¬è¯´æ˜ï¼š</p></blockquote><blockquote><p><strong>åˆ‡è®°ï¼Œåœ¨ç¬¬8è¡Œå‘½ä»¤ä¸­ï¼Œåœ¨mysqldumpå‘½ä»¤åè¦è¾“å…¥è‡ªå·±çš„æ•°æ®åº“ç”¨æˆ·åã€å¯†ç åŠæ•°æ®åº“åã€‚</strong></p></blockquote><blockquote><p>æ‰§è¡Œè¯¥è„šæœ¬ï¼Œé¦–å…ˆä¼šè¿›å…¥ /backup ç›®å½•ï¼Œç„¶åè¯¥è„šæœ¬ä¼šæŠŠåŸæœ‰çš„æ—§æ•°æ®åº“å¤‡ä»½ç§»åŠ¨åˆ° /oldbackup æ–‡ä»¶å¤¹ä¸­ï¼Œæ¥ç€æ ¹æ®ç³»ç»Ÿçš„æ—¥æœŸåŠæ—¶é—´ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åï¼Œåœ¨æœ€å mysqldump å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªâ€œ.sqlâ€æ ¼å¼çš„æ•°æ®åº“å¤‡ä»½æ–‡ä»¶ã€‚</p></blockquote><h2 id="4ã€-è®¾ç½®-backup-sh-è„šæœ¬æ–‡ä»¶çš„å¯æ‰§è¡Œè®¸å¯"><a href="#4ã€-è®¾ç½®-backup-sh-è„šæœ¬æ–‡ä»¶çš„å¯æ‰§è¡Œè®¸å¯" class="headerlink" title="4ã€ è®¾ç½® backup.sh è„šæœ¬æ–‡ä»¶çš„å¯æ‰§è¡Œè®¸å¯"></a>4ã€ è®¾ç½® backup.sh è„šæœ¬æ–‡ä»¶çš„å¯æ‰§è¡Œè®¸å¯</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chmod +x /backup/backup.sh</span></span><br></pre></td></tr></table></figure><h2 id="5ã€æ‰§è¡Œè„šæœ¬"><a href="#5ã€æ‰§è¡Œè„šæœ¬" class="headerlink" title="5ã€æ‰§è¡Œè„šæœ¬"></a>5ã€æ‰§è¡Œè„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">./backup.sh</span></span><br></pre></td></tr></table></figure><blockquote><p>è„šæœ¬è¿è¡Œç»“æŸåä¼šå¾—åˆ°ä»¥ä¸‹è¾“å…¥ã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">root@Server1:/download#./backup.sh</span><br><span class="line"></span><br><span class="line">You areinDownload Directory</span><br><span class="line"></span><br><span class="line">Old Backup DatabaseisMoved to oldbackup folder</span><br><span class="line"></span><br><span class="line">database backup successful completed</span><br><span class="line"></span><br><span class="line">root@Server1:/download#</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šé¦–æ¬¡æ‰§è¡Œè¯¥è„šæœ¬ä¼šæœ‰ä¸€ä¸ªâ€œno such fileâ€çš„æç¤ºä¿¡æ¯ï¼Œè¿™æ˜¯ç”±äºæ—§å¤‡ä»½æ–‡ä»¶è¿˜ä¸å­˜åœ¨ã€‚åªè¦å†æ¬¡æ‰§è¡Œè¯¥è„šæœ¬å°±æ²¡æœ‰é—®é¢˜äº†ï¼Œè¿™ä¸ªé—®é¢˜å·²ç»ä¸å­˜åœ¨äº†ã€‚</p></blockquote><h2 id="6ã€-ä½¿ç”¨cronåˆ¶è®¢å¤‡ä»½è®¡åˆ’"><a href="#6ã€-ä½¿ç”¨cronåˆ¶è®¢å¤‡ä»½è®¡åˆ’" class="headerlink" title="6ã€ ä½¿ç”¨cronåˆ¶è®¢å¤‡ä»½è®¡åˆ’"></a>6ã€ ä½¿ç”¨cronåˆ¶è®¢å¤‡ä»½è®¡åˆ’</h2><blockquote><p>ä½¿ç”¨Cronå¯ä»¥å®šæ—¶æ‰§è¡Œè¯¥è„šæœ¬ï¼Œå¤‡ä»½ä¼šè‡ªåŠ¨å®Œæˆã€‚ä½¿ç”¨ crontab å‘½ä»¤ç¼–è¾‘cron æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡ã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">crontab â€“e</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åªè¦åœ¨ç¼–è¾‘å™¨ä¸ŠåŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œä»£ç ä¿å­˜å³å¯ã€‚"><a href="#åªè¦åœ¨ç¼–è¾‘å™¨ä¸ŠåŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œä»£ç ä¿å­˜å³å¯ã€‚" class="headerlink" title="åªè¦åœ¨ç¼–è¾‘å™¨ä¸ŠåŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œä»£ç ä¿å­˜å³å¯ã€‚"></a>åªè¦åœ¨ç¼–è¾‘å™¨ä¸ŠåŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œä»£ç ä¿å­˜å³å¯ã€‚</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">013* * * * /backup/backup.sh</span><br></pre></td></tr></table></figure><p>æœ¬ä»»åŠ¡è¡¨ç¤ºçš„æ˜¯åœ¨æ¯å¤©ä¸‹åˆ1ç‚¹é’ŸæŠŠæ•°æ®åº“å¤‡ä»½åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚æœ‰å…³cronä»»åŠ¡è®¾ç½®çš„è¯¦ç»†å†…å®¹å¯ä»¥æŸ¥é˜…crontabæ‰‹å†Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š&quot;&gt;&lt;a href=&quot;#ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š&quot;&gt;&lt;/a&gt;ä¸»è„šæœ¬ï¼ˆç”¨äºå¤‡ä»½mysqlæ•°æ®åº“ï¼‰ï¼š&lt;/h1&gt;&lt;blockquo</summary>
      
    
    
    
    
    <category term="mysql" scheme="https://tauleos.github.io/tags/mysql/"/>
    
    <category term="linux" scheme="https://tauleos.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æ–°æ—§é¡¹ç›®åœ¨åŒä¸€ä¸ªç«¯å£ä¸‹è®¿é—®ï¼Œä¸å¯¼è‡´è·¨åŸŸçš„è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://tauleos.github.io/d038552d4a66.html"/>
    <id>https://tauleos.github.io/d038552d4a66.html</id>
    <published>2017-10-01T14:35:04.000Z</published>
    <updated>2019-05-07T06:07:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>1ã€é¦–å…ˆè¦å¯¹nginxé…ç½®çš„è™šæ‹Ÿä¸»æœºæ·»åŠ è½¬å‘æœºåˆ¶<br><img src="/images/1556280461651.png" alt="nginx"><br>ps:è®°å¾—æŠŠéœ€è¦è½¬å‘çš„é¡¹ç›®é…ç½®åœ¨ç›¸åŒçš„1200ç«¯å£å·ä¸‹è¾¹<br>2.ç«¯å£å·3000çš„é¡¹ç›®Aè®¿é—®ç«¯å£å·1200çš„é¡¹ç›®Bçš„æ—¶å€™ï¼Œé¡¹ç›®Bçš„é™æ€èµ„æºä¼šäº§ç”Ÿè·¨åŸŸæ— æ³•è®¿é—®çš„é—®é¢˜ï¼Œè¿™æ—¶å€™éœ€è¦åœ¨é¡¹ç›®Aä¸­æŠŠé¡¹ç›®Bçš„é™æ€èµ„æºè½¯é“¾æ¥è¿‡å»<br>å‘½ä»¤ä¸ºï¼š<br>     ln -s  é¡¹ç›®Bçš„æ–‡ä»¶è·¯å¾„ é¡¹ç›®Açš„æ–‡ä»¶è·¯å¾„<br>3.ä¸Šé¢ä¸¤éƒ¨é…ç½®å®Œæˆåï¼Œå¯åŠ¨é¡¹ç›®A,æŠŠè·¯å¾„æ”¹æˆé¡¹ç›®Bçš„è·¯ç”±ä¹Ÿå¯ä»¥è®¿é—®ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p>è®¿é—®é¡¹ç›®Açš„åœ°å€</p><p>è®¿é—®Bçš„åœ°å€</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1ã€é¦–å…ˆè¦å¯¹nginxé…ç½®çš„è™šæ‹Ÿä¸»æœºæ·»åŠ è½¬å‘æœºåˆ¶&lt;br&gt;&lt;img src=&quot;/images/1556280461651.png&quot; alt=&quot;nginx&quot;&gt;&lt;br&gt;ps:è®°å¾—æŠŠéœ€è¦è½¬å‘çš„é¡¹ç›®é…ç½®åœ¨ç›¸åŒçš„1200ç«¯å£å·ä¸‹è¾¹&lt;br&gt;2.ç«¯å£å·3000çš„é¡¹ç›®Aè®¿é—®ç«¯å£å·1200çš„é¡¹</summary>
      
    
    
    
    
    <category term="nginx" scheme="https://tauleos.github.io/tags/nginx/"/>
    
  </entry>
  
</feed>
